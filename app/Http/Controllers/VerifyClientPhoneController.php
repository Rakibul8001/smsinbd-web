<?php

namespace App\Http\Controllers;

use App\Core\ClientSenderid\ClientSenderid;
use App\Core\ContactsAndGroups\ContactsAndGroups;
use App\Core\ContactsAndGroups\ContactsAndGroupsDetails;
use App\Core\ProductSales\ProductSales;
use App\Core\Senderid\SenderidDetails;
use App\Core\SmsSend\SmsSend;
use App\Core\SmsSend\SmsSendDetails;
use App\Core\UserCountSms\UserCountSms;
use App\Core\Users\ClientInterface;
use App\Core\Users\ClientRepository;
use App\Http\Resources\UserSentSmsResource;
use App\Jobs\PendingSmsToSendJob;
use App\Jobs\UserSmsSetupJob;
use App\Operator;
use App\SmsSender;
use App\Gateway;
use App\UserSentSms;
use App\UserSentSmsBackup;
use App\CheckRuntimeBalance;
use Carbon\Carbon;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Cache;
use Illuminate\Support\Str;
use App\Http\Resources\SmsSenderIdResource;
use DB;
use App\User;
use App\Reseller;
use App\RootUser;
use App\Http\Resources\TemplateResource;
use App\Template;
use GuzzleHttp\Client;
use App\Events\DlrPushEvent;
use App\Jobs\DlrPUshJob;
use App\Jobs\DlrPUshSecondJob;
use Illuminate\Support\Facades\Http;
use Log;

class VerifyClientPhoneController extends Controller
{
    
    /**
     * Client senderid service
     *
     * @var App\Core\ClientSenderid\ClientSenderidDetails
     */
    protected $clientsenderid;


    /**
     * Contact group service
     *
     * @var App\Core\ContactsAndGroups\ContactsAndGroupsDetails
     */
    protected $contactgroup;

    /**
     * SmsSend service
     *
     * @var App\Core\SmsSend\SmsSendDetails
     */
    protected $smssend;

    /**
     * User service
     *
     * @var App\Core\Users\ClientRepository
     */
    protected $client;

    /**
     * sms message count
     *
     * @var string
     */
    protected $messagecount;

    /**
     * sms message type
     *
     * @var string
     */
    protected $messagetype;

    /**
     * Total contacts in groups
     *
     * @var integer
     */
    protected $totalValidContact = 0;

    /**
     * Product sales service
     *
     * @var App\Core\ProductSales\ProductSaleDetails
     */
    protected $product;

    protected $consumesms;

    public function __construct(
        ClientSenderid $clientsenderid,
        ContactsAndGroups $contactgroup,
        ClientInterface $client,
        SmsSend $smssend,
        ProductSales $product,
        UserCountSms $consumesms
    )
    {
        $this->clientsenderid = $clientsenderid;
        $this->contactgroup = $contactgroup;
        $this->smssend = $smssend;
        $this->client = $client;
        $this->product = $product;
        $this->consumesms = $consumesms;

        ini_set('max_execution_time', 0);
    }

    


    public function getSenderIdType(Request $request)
    {
        if (! $request->has('senderid'))
        {
            return response()->json(['errmsg' => 'Senderid Not Provided'], 406);
        }
        
        $senderidtype = $this->smssend->getSenderIdType(['senderid' => $request->senderid]);

        //Cache::store('redis')->put('smscategory_client_'.Auth::guard('web')->user()->id, $senderidtype);

        return $senderidtype;
    }

    

    public function getTotalNumberOfContacts(Request $request)
    {

        if (! $request->has('contactgroup') || empty($request->contactgroup))
        {
            $totalContact = [];
            //Cache::store('redis')->put('totalcontacts_ina_group_client_'.Auth::guard('web')->user()->id, $totalContact);
            return response()->json(['errmsg' => $totalContact], 406);
        }

        $userid = Auth::guard('web')->user()->id;
        
        $totalContact = [];

        foreach($request->contactgroup as $group)
        {
            $groupinfo = $this->contactgroup->getGroupById($group);
            
            array_push($totalContact,$this->smssend->getTotalNumberOfContacts([
                'user_id' => $userid, 
                'groupid' => $group
            ]));
        }

        //Cache::store('redis')->put('totalcontacts_ina_group_client_'.Auth::guard('web')->user()->id, $totalContact);

        //return Cache::store('redis')->get('totalcontacts_ina_group_client_'.Auth::guard('web')->user()->id);
        return $totalContact;
    }


    public function validMobile(Request $request)
    {
        Auth::guard('web')->login($request->user());

        $userid = Auth::guard('web')->user()->id;

        $totalContacts = [];

        $newarr = [];
        if (! empty($request->contactgroup))
        {
            foreach(array_unique($request->contactgroup) as $group)
            {
                $totalContacts[] = $this->smssend->validMobile($userid, $group);

                $this->totalValidContact += $this->smssend->totalValidContactInAGroup();
            }
            
            foreach($totalContacts as $contact)
            {
                array_push($newarr,$contact);
            }
            
            return array_merge(...$newarr);
        }

        return 0;
    }


    public function validMobileInRequest(Request $request)
    {
        Auth::guard('web')->login($request->user());

        $userid = Auth::guard('web')->user()->id;

        $totalContacts = [];

        $newarr = [];
        
        if (! empty($request->contact_number))
        {
            $contacts =  explode(",",str_replace("\n",",",str_replace(" ",",",$request->contact_number)));
            //foreach(array_unique($contacts) as $group)
            //{
                $totalContacts[] = $this->smssend->validMobileFromRequest($contacts);

                $this->totalValidContact += $this->smssend->totalValidContactInARequest($contacts);
            //}
            
            foreach($totalContacts as $contact)
            {
                array_push($newarr,$contact);
            }
            
            return array_merge(...$newarr);
        }

        return 0;
    }

    public function validMobileFromFile(Request $request)
    {
        Auth::guard('web')->login($request->user());

        $userid = Auth::guard('web')->user()->id;

        $totalContacts = [];

        $newarr = [];

        $this->contactgroup->addContactFile($request);

        $extension = $this->contactgroup->getFileExtension();
        if ($extension === 'csv')
        {
            $contacts = $this->contactgroup->getBdMobileNumberFromCSV();

        } else if($extension === 'xls' || $extension === 'xlsx') {

            $contacts = $this->contactgroup->getBDMobileNumberFromXlsOrXlsx();


        } else if ($extension === 'txt') {
            
            $contacts = $this->contactgroup->getBDMobileNumberFromTextFile();


        } else {
            return response()->json(['msg' => 'There is an error, problem may be invalid file format!'], 406);
        }

        if (count($contacts) > 0 )
        {   
            $totalContacts[] = $this->smssend->validMobileFromFile($userid, $contacts);

            $this->totalValidContact += $this->smssend->totalValidContactInAFile();
            
            foreach($totalContacts as $contact)
            {
                array_push($newarr,$contact);
            }
            
            return array_merge(...$newarr);
        }

        return 0;
    }

    public function smsBalance(Request $request)
    {
        Auth::guard('web')->login($request->user());

        $clientid = Auth::guard('web')->user();

        $senderidtype = $request->senderidtype;

        $clientmasksmsbal = $this->product->getSmsBalanceByCategory($clientid->id,'mask');
        $clientnonmasksmsbal = $this->product->getSmsBalanceByCategory($clientid->id,'nomask');
        $clientvoicemsbal = $this->product->getSmsBalanceByCategory($clientid->id,'voice');

        $totalmaskbal = ($clientmasksmsbal-$this->consumesms->totalConsumeMaskBalance($clientid->id));
        $totalnonmaskbal = ($clientnonmasksmsbal-$this->consumesms->totalConsumeNonMaskBalance($clientid->id));
        $totalvoicebal = ($clientvoicemsbal-$this->consumesms->totalConsumeVoiceBalance($clientid->id));

        

        if ($senderidtype == 'mask')
        {
            return response()->json(['maskbalance' => $totalmaskbal], 201);
        }

        if ($senderidtype == 'nonmask')
        {
            return response()->json(['nonmaskbalance' => $totalnonmaskbal], 201);
        }

        if ($senderidtype == 'voice')
        {
            return response()->json(['voicebal' => $totalvoicebal], 201);
        }

        
    }


    public function detailDlr(Request $request) 
    {
        Auth::guard('web')->login($request->user());
        $clientid = Auth::guard('web')->user()->id;

        $limit_start = empty($request->limit_start) || !isset($request->limit_start) ? 0 : $request->limit_start;
        $limit_end = empty($request->limit_end) || !isset($request->limit_end) ? 100 : $request->limit_end;

        $fromdate = empty($request->fromdate) || !isset($request->fromdate) ? date("Y-m-d") : $request->fromdate;
        $todate = empty($request->todate) || !isset($request->todate) ? date("Y-m-d") : $request->todate;

        $camid = empty($request->camid) || !isset($request->camid) ? NULL : $request->camid;

        if ($camid == NULL)
        {

            $query = DB::select(DB::raw("select userid,smsid,sender_name senderid,contact,sms_content,smscount,submitted_at,status
                                            from detail_dlr
                                            where userid = '$clientid'
                                            limit $limit_start, $limit_end
            "));
        } else {
            $query = DB::select(DB::raw("select userid,smsid,sender_name senderid,contact,sms_content,smscount,submitted_at,status
                        from detail_dlr
                        where DATE(submitted_at) between '$fromdate' and '$todate'
                        and userid = '$clientid'
                        and smsid = '$camid'
                        limit $limit_start, $limit_end
            "));
        }

        $data = [];
        foreach($query as $record)
        {
            $data['data'][] = [
                'camid' => $record->smsid,
                'senderid' => $record->senderid,
                'contact' => $record->contact,
                'sms_content' => $record->sms_content,
                'smscount' => $record->smscount,
                'submitted_at' => $record->submitted_at,
                'status' => $record->status == 1 ? 'Success' : 'Faild'
            ];
        }

        return json_encode($data, JSON_UNESCAPED_UNICODE );
    }


    public function manageSmsRotationMessage(Request $request)
    {
        Auth::guard('web')->login($request->user());

        if (isset($request->templateid) && !empty($request->templateid))
        {
            $template = new TemplateResource(Template::where('id', $request->templateid)
                                                        ->where('status',true)
                                                        ->where('user_id',Auth::guard('web')->user()->id)
                                                        ->where('user_type','client')
                                                        ->first()
                        );
            $templatecontent = $template->template_desc;
        }

        
        $campaing = !empty($request->cam_name) ? $request->cam_name."-".Auth::guard('web')->user()->id : 'campaing-'.Auth::guard('web')->user()->id.date("d").time();
        
        $clientsenderids = $this->smssend->getSenderIdInformationBySenderName($request->senderid);
        
        if (! $clientsenderids instanceof SmsSenderIdResource)
        {
            return response()->json(['errmsg' => $clientsenderids->getData()->errmsg], 406);
        }

        $gateways = json_decode($clientsenderids->rotation_gateway_info);

        if (empty($gateways))
        {
            $gateways = $clientsenderids;
        }


        $contacts = [];

        $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

        $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));

        $senderidtype = $this->smssend->getSenderIdType(['senderid' => $request->senderid]);

        $clientid = Auth::guard('web')->user();

        $clientmasksmsbal = $this->product->getSmsBalanceByCategory($clientid->id,'mask');
        $clientnonmasksmsbal = $this->product->getSmsBalanceByCategory($clientid->id,'nomask');
        $clientvoicemsbal = $this->product->getSmsBalanceByCategory($clientid->id,'voice');

        $totalmaskbal = ($clientmasksmsbal-$this->consumesms->totalConsumeMaskBalance($clientid->id));
        $totalnonmaskbal = ($clientnonmasksmsbal-$this->consumesms->totalConsumeNonMaskBalance($clientid->id));
        $totalvoicebal = ($clientvoicemsbal-$this->consumesms->totalConsumeVoiceBalance($clientid->id));


        $root_userid = Auth::guard('web')->user()->root_user_id;

        $reseller_id = Auth::guard('web')->user()->reseller_id;

        

        //Single contact number start
        if ($request->numbertype == 'group')
        {
            $contacts =  explode(",",str_replace("\n",",",str_replace(" ",",",$request->contact_number)));

            $totalSms = ($this->messagecount*count($contacts));

            if ($totalmaskbal < $totalSms && $senderidtype == 'mask')
            {
                return response()->json(['errmsg' => "Insufficient mask sms balance"], 406);
            }

            if ($totalnonmaskbal < $totalSms && $senderidtype == 'nomask')
            {
                return response()->json(['errmsg' => "Insufficient nonmask sms balance"], 406);
            }

            if ($totalvoicebal < $totalSms && $senderidtype == 'voice')
            {
                return response()->json(['errmsg' => "Insufficient voice sms balance"], 406);
            }

        } else {
            $contacts =  explode(",",str_replace("\n",",",str_replace(" ",",",$request->contact_number)));//$request->numbertype == 'contgroup' ? $this->validMobile($request) : $this->validMobileFromFile($request);

            $this->validMobileInRequest($request);
            
            $totalValidContact = $this->totalValidContact;

            $totalSms = ($totalValidContact*$this->messagecount);

            if ($totalmaskbal < $totalSms && $senderidtype == 'mask')
            {
                return response()->json(['errmsg' => "Insufficient mask sms balance"], 406);
            }

            if ($totalnonmaskbal < $totalSms && $senderidtype == 'nomask')
            {
                return response()->json(['errmsg' => "Insufficient nonmask sms balance"], 406);
            }

            if ($totalvoicebal < $totalSms && $senderidtype == 'voice')
            {
                return response()->json(['errmsg' => "Insufficient voice sms balance"], 406);
            }
        }
        
        $smssentdata = [];

        $operator_contacts = [];

        foreach(array_unique($contacts) as $contact_number)
        {
            
            $validprefix =  ["88017","88014","88013","88015","88018","88016","88019"];

            $checkcontact = Str::substr($contact_number,0,2);
            $checkcontactwithplus = Str::substr($contact_number,0,3);

            //Covert number in format like 01716xxxxxx if start with 88
            $contact_number_n = '';
            if ($checkcontact == 88 || $checkcontactwithplus == '+88')
            {
                //$contact_number_n = $checkcontact == 88 ? Str::substr($contact_number,2,13) : Str::substr($contact_number,3,13); 
                $contact_number_n = $checkcontact == 88 ? Str::substr($contact_number,0,13) : Str::substr($contact_number,1,13); 
            } else {
                $contact_number_n = $contact_number;
            }

            $operator_contacts[] = $contact_number_n;

            $opt = '88'.Str::substr($contact_number_n,0,3);  

            $smssentdata[] = [
                'remarks' => $campaing,
                'user_id' => Auth::guard('web')->user()->id,
                'user_sender_id' => $clientsenderids->id,
                'to_number' => $contact_number_n,
                'sms_type' => $this->messagetype,
                'sms_catagory' => $senderidtype,
                'sms_content' => $request->message,
                'number_of_sms' => $this->messagecount,
                'total_contacts' => 1,
                'send_type' => 'api',
                'contact_group_id' => 0,
                'status' => false,
                'submitted_at' => Carbon::now(),
            ];
        }


        foreach (array_chunk($smssentdata,5000) as $t)  
        {
            $backupstage = DB::table("backups_stage")->get();

            if ($backupstage[0]->status) {
                DB::table('user_sent_smses_backup')->insert($t); 
            } else {
                DB::table('user_sent_smses')->insert($t); 
            }
        }
                    
        $gateway = collect($gateways)->where('status','yes');

        if (! CheckRuntimeBalance::where('userid',Auth::guard('web')->user()->id)
                                    ->exists()
        ) {

            CheckRuntimeBalance::create([
                'userid' => Auth::guard('web')->user()->id,
                'ischecked' => false
            ]);
        }

        $checkruntimerotation = DB::table('runtime_rotations')
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->get();


        foreach($gateway as $gate)
        {
            $associate_sender_id = $gate->associate_sender_id;
            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
            
            
            
            if ($checkruntimerotation->isEmpty()) {
                DB::table('runtime_rotations')
                    ->insert([
                        'senderid' => $request->senderid,
                        'associate_sender_id' => $associate_sender_id,
                        'associate_gateway' => $gate->associate_gateway,
                        'user_id' => Auth::guard('web')->user()->id,
                        'rotation_finished' => false,
                        'created_at' => Carbon::now(),
                        'updated_at' => Carbon::now(),
                    ]);
            }
        }

        $checkfalseruntimerotation = DB::table('runtime_rotations')
                                ->where('rotation_finished',false)
                                ->where('senderid', $request->senderid)
                                ->where('user_id', Auth::guard('web')->user()->id)
                                ->get();

        if (! $checkruntimerotation->isEmpty() && $checkfalseruntimerotation->isEmpty()) {
            DB::table('runtime_rotations')
                                ->where('senderid', $request->senderid)
                                ->where('user_id', Auth::guard('web')->user()->id)
                                ->update([
                                    'rotation_finished' => false
                                ]);
        }

        $rotations = DB::table('runtime_rotations')
                                ->where('rotation_finished',false)
                                ->where('senderid', $request->senderid)
                                ->where('user_id', Auth::guard('web')->user()->id)
                                ->get();

        foreach($rotations as $runtimerotation) {
            
            switch($runtimerotation->associate_gateway) {
                case 1:
                    //teletalk
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    $r = 0;
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }
                    foreach($operator_contacts as $opcontact)
                    {
                        if ($r == 0) {
                            $data = [ 
                                "userid"        => Auth::guard('web')->user()->id,
                                "campaing"  => $campaing,
                                "senderidtype" => $senderidtype,
                                "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                "op"		=> "SMS", 
                                "mobile"	    => $opcontact,
                                "messagecount" => $this->messagecount,  
                                "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$request->senderid,     
                                "charset"	=> $this->messagetype, 
                                "sms"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                'post_url' =>  $associate_gateway->api_url,
                                
                                //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                            ];
                            
                            $this->smssend->smsSendToTelitalk($data);
                            $r = 1;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }

                            DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    break;
                case 2:
                    //gp
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {

                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            
                        }

                        $data = [ 
                            "userid"        => Auth::guard('web')->user()->id,
                            "campaing"      => $campaing,
                            "senderidtype" => $senderidtype,
                            "username"		=> $associate_gateway->user,               
                            "password"		=> $associate_gateway->password,  
                            "apicode"		=> "1", 
                            "msisdn"	    => implode(",",$gp100),
                            "messagecount" => $this->messagecount,
                            "countrycode"	=> "880",
                            "messageid"		=> 0,
                            "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                            "messagetype"	=> $this->messagetype, 
                            "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            'post_url'      => $associate_gateway->api_url,
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            
                        ];
                        $this->smssend->smsSendToGp($data);
                        DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [ 
                                    "userid"        => Auth::guard('web')->user()->id,
                                    "campaing"      => $campaing,
                                    "senderidtype" => $senderidtype,
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $this->messagecount,
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $this->messagetype, 
                                    "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];

                                $i = 0;
                                $this->smssend->smsSendToGp($data);
                                unset($gp100);

                                DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [ 
                                "userid"        => Auth::guard('web')->user()->id,
                                "campaing"      => $campaing,
                                "senderidtype" => $senderidtype,
                                "username"		=> $associate_gateway->user,               
                                "password"		=> $associate_gateway->password,  
                                "apicode"		=> "1", 
                                "msisdn"	    => implode(",",$gp100),
                                "messagecount" => $this->messagecount,
                                "countrycode"	=> "880",
                                "messageid"		=> 0,
                                "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                "messagetype"	=> $this->messagetype, 
                                "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                'post_url'      => $associate_gateway->api_url,
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                
                            ];
                            $this->smssend->smsSendToGp($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }

                            DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 3:
                    //blink
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }
                    
                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        
                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'msisdn'   => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        $this->smssend->smsSendToBlink($data);
                        DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        

                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];

                                $i = 0;
                                $this->smssend->smsSendToBlink($data);
                                unset($gp100);

                                DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'msisdn'   => implode(",",$gp100),
                                'messagecount' => $opcontact['number_of_sms'],
                                'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                            ];
                            $this->smssend->smsSendToBlink($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }

                            DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 4: 
                    //robi
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    if (count($operator_contacts) < 200)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }
                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'To'       => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        if ($senderidtype == 'nomask')
                        {
                            $this->smssend->smsSendToRobiNonMask($data);
                        } else {
                            $this->smssend->smsSendToRobi($data);
                        }

                        DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 200)
                            {
                                
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $this->messagecount,
                                    'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                                $i = 0;
                                unset($gp100);

                                DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            //if ($i <= 200)
                            if ($i < 200 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }
                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'To'       => implode(",",$gp100),
                                'messagecount' => $this->messagecount,
                                'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            if ($senderidtype == 'nomask')
                            {
                                $this->smssend->smsSendToRobiNonMask($data);
                            } else {
                                $this->smssend->smsSendToRobi($data);
                            }

                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }

                            DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 5: 
                    //airtel
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    if (count($operator_contacts) < 200)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }
                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'To'       => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        if ($senderidtype == 'nomask')
                        {
                            $this->smssend->smsSendToRobiNonMask($data);
                        } else {
                            $this->smssend->smsSendToRobi($data);
                        }

                        DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 200)
                            {
                                
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $this->messagecount,
                                    'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                                $i = 0;
                                unset($gp100);

                                DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            //if ($i <= 200)
                            if ($i < 200 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }
                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'To'       => implode(",",$gp100),
                                'messagecount' => $this->messagecount,
                                'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            if ($senderidtype == 'nomask')
                            {
                                $this->smssend->smsSendToRobiNonMask($data);
                            } else {
                                $this->smssend->smsSendToRobi($data);
                            }

                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }

                            DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 6:
                    //blx
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'msisdn'   => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        $this->smssend->smsSendToBlink($data);
                        DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $this->messagecount,
                                    'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];

                                $i = 0;
                                $this->smssend->smsSendToBlink($data);
                                unset($gp100);
                                DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i< 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'msisdn'   => implode(",",$gp100),
                                'messagecount' => $this->messagecount,
                                'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            $this->smssend->smsSendToBlink($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 7: 
                    //gpx
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {

                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        $data = [ 
                            "userid"        => Auth::guard('web')->user()->id,
                            "campaing"      => $campaing,
                            "senderidtype" => $senderidtype,
                            "username"		=> $associate_gateway->user,               
                            "password"		=> $associate_gateway->password,  
                            "apicode"		=> "1", 
                            "msisdn"	    => implode(",",$gp100),
                            "messagecount" => $this->messagecount,
                            "countrycode"	=> "880",
                            "messageid"		=> 0,
                            "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                            "messagetype"	=> $this->messagetype, 
                            "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            'post_url'      => $associate_gateway->api_url,
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            
                        ];
                        $this->smssend->smsSendToGp($data);
                        DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [ 
                                    "userid"        => Auth::guard('web')->user()->id,
                                    "campaing"      => $campaing,
                                    "senderidtype" => $senderidtype,
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $this->messagecount,
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $this->messagetype, 
                                    "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];

                                $i = 0;
                                $this->smssend->smsSendToGp($data);
                                unset($gp100);
                                DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [ 
                                "userid"        => Auth::guard('web')->user()->id,
                                "campaing"      => $campaing,
                                "senderidtype" => $senderidtype,
                                "username"		=> $associate_gateway->user,               
                                "password"		=> $associate_gateway->password,  
                                "apicode"		=> "1", 
                                "msisdn"	    => implode(",",$gp100),
                                "messagecount" => $this->messagecount,
                                "countrycode"	=> "880",
                                "messageid"		=> 0,
                                "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                "messagetype"	=> $this->messagetype, 
                                "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                'post_url'      => $associate_gateway->api_url,
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                
                            ];
                            $this->smssend->smsSendToGp($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 8: 
                    //rankstel
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        
                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'credential'		=> "$associate_gateway->user:$associate_gateway->password",              
                            'username'		=> $associate_gateway->user,         
                            'password'		=> $associate_gateway->password,
                            'msisdn'   => implode(",",$gp100),
                            'messagecount' =>  $this->messagecount,
                            "messagetype"	=> $this->messagetype,
                            'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        $this->smssend->smsSendToRanksTel($data);
                        DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'credential'		=> "$associate_gateway->user:$associate_gateway->password",              
                                    'username'		=> $associate_gateway->user,             
                                    'password'		=> $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' =>  $this->messagecount,
                                    "messagetype"	=> $this->messagetype,
                                    'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];

                                $i = 0;
                                $this->smssend->smsSendToRanksTel($data);
                                unset($gp100);
                                DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                    unset($operator_contacts[$key]);
                                }
                                continue;
                            }

                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'credential'		=> "$associate_gateway->user:$associate_gateway->password",              
                                'username'		=> $associate_gateway->user,              
                                'password'		=> $associate_gateway->password,
                                'msisdn'   => implode(",",$gp100),
                                'messagecount' =>  $this->messagecount,
                                "messagetype"	=> $this->messagetype,
                                'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            $this->smssend->smsSendToRanksTel($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 9: 
                    //gp-3
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {

                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        $data = [ 
                            "userid"        => Auth::guard('web')->user()->id,
                            "campaing"      => $campaing,
                            "senderidtype" => $senderidtype,
                            "username"		=> $associate_gateway->user,               
                            "password"		=> $associate_gateway->password,  
                            "apicode"		=> "1", 
                            "msisdn"	    => implode(",",$gp100),
                            "messagecount" => $this->messagecount,
                            "countrycode"	=> "880",
                            "messageid"		=> 0,
                            "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                            "messagetype"	=> $this->messagetype, 
                            "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            'post_url'      => $associate_gateway->api_url,
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            
                        ];
                        $this->smssend->smsSendToGp($data);
                        DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [ 
                                    "userid"        => Auth::guard('web')->user()->id,
                                    "campaing"      => $campaing,
                                    "senderidtype" => $senderidtype,
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $this->messagecount,
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $this->messagetype, 
                                    "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];

                                $i = 0;
                                $this->smssend->smsSendToGp($data);
                                unset($gp100);
                                DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [ 
                                "userid"        => Auth::guard('web')->user()->id,
                                "campaing"      => $campaing,
                                "senderidtype" => $senderidtype,
                                "username"		=> $associate_gateway->user,               
                                "password"		=> $associate_gateway->password,  
                                "apicode"		=> "1", 
                                "msisdn"	    => implode(",",$gp100),
                                "messagecount" => $this->messagecount,
                                "countrycode"	=> "880",
                                "messageid"		=> 0,
                                "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                "messagetype"	=> $this->messagetype, 
                                "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                'post_url'      => $associate_gateway->api_url,
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                
                            ];
                            $this->smssend->smsSendToGp($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 10: 
                    //gp-2
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {

                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        $data = [ 
                            "userid"        => Auth::guard('web')->user()->id,
                            "campaing"      => $campaing,
                            "senderidtype" => $senderidtype,
                            "username"		=> $associate_gateway->user,               
                            "password"		=> $associate_gateway->password,  
                            "apicode"		=> "1", 
                            "msisdn"	    => implode(",",$gp100),
                            "messagecount" => $this->messagecount,
                            "countrycode"	=> "880",
                            "messageid"		=> 0,
                            "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                            "messagetype"	=> $this->messagetype, 
                            "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            'post_url'      => $associate_gateway->api_url,
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            
                        ];
                        $this->smssend->smsSendToGp($data);
                        DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [ 
                                    "userid"        => Auth::guard('web')->user()->id,
                                    "campaing"      => $campaing,
                                    "senderidtype" => $senderidtype,
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $this->messagecount,
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $this->messagetype, 
                                    "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];

                                $i = 0;
                                $this->smssend->smsSendToGp($data);
                                unset($gp100);
                                DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [ 
                                "userid"        => Auth::guard('web')->user()->id,
                                "campaing"      => $campaing,
                                "senderidtype" => $senderidtype,
                                "username"		=> $associate_gateway->user,               
                                "password"		=> $associate_gateway->password,  
                                "apicode"		=> "1", 
                                "msisdn"	    => implode(",",$gp100),
                                "messagecount" => $this->messagecount,
                                "countrycode"	=> "880",
                                "messageid"		=> 0,
                                "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                "messagetype"	=> $this->messagetype, 
                                "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                'post_url'      => $associate_gateway->api_url,
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                
                            ];
                            $this->smssend->smsSendToGp($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 15: 
                    //EasyWeb
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'msisdn'   => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        $this->smssend->smsSendToEasyWeb($data);
                        DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $this->messagecount,
                                    'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];

                                $i = 0;
                                $this->smssend->smsSendToEasyWeb($data);
                                unset($gp100);
                                DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'msisdn'   => implode(",",$gp100),
                                'messagecount' => $this->messagecount,
                                'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            $this->smssend->smsSendToEasyWeb($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;

                case 16: 
                    //Banglaphone
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'username' => $associate_gateway->user,
                            'password' => $associate_gateway->password,
                            'msisdn'   => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        $this->smssend->smsSendToBanglaPhone($data);
                        DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $this->messagecount,
                                    'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];

                                $i = 0;
                                $this->smssend->smsSendToBanglaPhone($data);
                                unset($gp100);
                                DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'username' => $associate_gateway->user,
                                'password' => $associate_gateway->password,
                                'msisdn'   => implode(",",$gp100),
                                'messagecount' => $this->messagecount,
                                'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            $this->smssend->smsSendToBanglaPhone($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break; 
                case 18:
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    if (count($operator_contacts) < 200)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }
                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'To'       => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        if ($senderidtype == 'nomask')
                        {
                            $this->smssend->smsSendToRobiNonMask($data);
                        } else {
                            $this->smssend->smsSendToRobi($data);
                        }

                        DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 200)
                            {
                                
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $this->messagecount,
                                    'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                                $i = 0;
                                unset($gp100);

                                DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            //if ($i <= 200)
                            if ($i < 200 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }
                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'To'       => implode(",",$gp100),
                                'messagecount' => $this->messagecount,
                                'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            if ($senderidtype == 'nomask')
                            {
                                $this->smssend->smsSendToRobiNonMask($data);
                            } else {
                                $this->smssend->smsSendToRobi($data);
                            }

                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }

                            DB::table('runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;    
                default: 
                    return response()->json(['errmsg' => 'No Gateway Found'],406);  
            }
        }

        $clientmasksmsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'mask');
        $clientnonmasksmsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'nomask');
        $clientvoicemsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'voice');

        $totalmaskbal_1 = ($clientmasksmsbal_1-$this->consumesms->totalConsumeMaskBalance($clientid->id));
        $totalnonmaskbal_1 = ($clientnonmasksmsbal_1-$this->consumesms->totalConsumeNonMaskBalance($clientid->id));
        $totalvoicebal_1 = ($clientvoicemsbal_1-$this->consumesms->totalConsumeVoiceBalance($clientid->id));

        $camid = substr($campaing,9, strlen($campaing));
        
        if ($totalmaskbal_1 <= $totalmaskbal || $totalnonmaskbal_1 <= $totalnonmaskbal || $totalvoicebal_1<= $totalvoicebal)
        {
            if ($senderidtype == 'mask')
            {
                if (session()->has('sendsuccess'))
                {
                    return response()->json(['msg' => session()->get('sendsuccess'),'mask' => $totalmaskbal_1,'MessageId' => $camid],200);
                }

                if (session()->has('senderr'))
                {
                    return response()->json(['errmsg' => session()->get('senderr')],406);
                }
                //return response()->json(['msg' => 'SMS succesfully sent','mask' => $totalmaskbal_1],200);
            } else if ($senderidtype == 'nomask') {
                if (session()->has('sendsuccess'))
                {
                    return response()->json(['msg' => session()->get('sendsuccess'),'nonmask' => $totalnonmaskbal_1,'MessageId' => $camid],200);
                }

                if (session()->has('senderr'))
                {
                    return response()->json(['errmsg' => session()->get('senderr')],406);
                }
                //return response()->json(['msg' => 'SMS succesfully sent','nomask' => $totalnonmaskbal_1],200);
            } else if ($senderidtype == 'voice') {
                if (session()->has('sendsuccess'))
                {
                    return response()->json(['msg' => session()->get('sendsuccess'),'voicemask' => $totalvoicebal_1,'MessageId' => $camid],200);
                }

                if (session()->has('senderr'))
                {
                    return response()->json(['errmsg' => session()->get('senderr')],406);
                }
                //return response()->json(['msg' => 'SMS succesfully sent','voice' => $totalvoicebal_1],200);
            } else {
                return 0;
            }
        } else {
            if (session()->has('sendsuccess'))
            {
                return response()->json(['msg' => session()->get('sendsuccess'),'mask' => $totalmaskbal_1,'MessageId' => $camid],200);
            }

            if (session()->has('senderr'))
            {
                return response()->json(['errmsg' => session()->get('senderr')],406);
            }
            //return response()->json(['errmsg' => 'There is an error, with the senderid, please contact with vendor'],406);
        }
    }


    public function manageSmsTemplateRotationMessage(Request $request)
    {
        Auth::guard('web')->login($request->user());
        
        $campaing = !empty($request->cam_name) ? $request->cam_name."-".Auth::guard('web')->user()->id : 'campaing-'.Auth::guard('web')->user()->id.date("d").time();
        
        $clientsenderids = $this->smssend->getSenderIdInformationBySenderName($request->senderid);
        
        if (! $clientsenderids instanceof SmsSenderIdResource)
        {
            return response()->json(['errmsg' => $clientsenderids->getData()->errmsg], 406);
        }

        $gateways = json_decode($clientsenderids->multiple_template_gateway_info);

        if (empty($gateways))
        {
            $gateways = $clientsenderids;
            
        }


        $contacts = [];

        $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

        $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));

        $senderidtype = $this->smssend->getSenderIdType(['senderid' => $request->senderid]);
     

        $clientid = Auth::guard('web')->user();
        
        $clientmasksmsbal = $this->product->getSmsBalanceByCategory($clientid->id,'mask');
        $clientnonmasksmsbal = $this->product->getSmsBalanceByCategory($clientid->id,'nomask');
        $clientvoicemsbal = $this->product->getSmsBalanceByCategory($clientid->id,'voice');

        $totalmaskbal = ($clientmasksmsbal-$this->consumesms->totalConsumeMaskBalance($clientid->id));
        $totalnonmaskbal = ($clientnonmasksmsbal-$this->consumesms->totalConsumeNonMaskBalance($clientid->id));
        $totalvoicebal = ($clientvoicemsbal-$this->consumesms->totalConsumeVoiceBalance($clientid->id));


        $root_userid = Auth::guard('web')->user()->root_user_id;

        $reseller_id = Auth::guard('web')->user()->reseller_id;

        

        //Single contact number start
        if ($request->numbertype == 'group')
        {
            $contacts =  explode(",",str_replace("\n",",",str_replace(" ",",",$request->contact_number)));

            $totalSms = ($this->messagecount*count($contacts));

            if ($totalmaskbal < $totalSms && $senderidtype == 'mask')
            {
                return response()->json(['errmsg' => "Insufficient mask sms balance"], 406);
            }

            if ($totalnonmaskbal < $totalSms && $senderidtype == 'nomask')
            {
                return response()->json(['errmsg' => "Insufficient nonmask sms balance"], 406);
            }

            if ($totalvoicebal < $totalSms && $senderidtype == 'voice')
            {
                return response()->json(['errmsg' => "Insufficient voice sms balance"], 406);
            }

        } else {
            $contacts =  explode(",",str_replace("\n",",",str_replace(" ",",",$request->contact_number)));//$request->numbertype == 'contgroup' ? $this->validMobile($request) : $this->validMobileFromFile($request);
            
            $this->validMobileInRequest($request);
            
            $totalValidContact = $this->totalValidContact;

            $totalSms = ($totalValidContact*$this->messagecount);
            

            //$totalSms = ($this->messagecount*count($contacts));

            if ($totalmaskbal < $totalSms && $senderidtype == 'mask')
            {
                return response()->json(['errmsg' => "Insufficient mask sms balance"], 406);
            }

            if ($totalnonmaskbal < $totalSms && $senderidtype == 'nomask')
            {
                return response()->json(['errmsg' => "Insufficient nonmask sms balance"], 406);
            }

            if ($totalvoicebal < $totalSms && $senderidtype == 'voice')
            {
                return response()->json(['errmsg' => "Insufficient voice sms balance"], 406);
            }
        }
        
        $smssentdata = [];

        $operator_contacts = [];

        foreach(array_unique($contacts) as $contact_number)
        {
            
            $validprefix =  ["88017","88014","88013","88015","88018","88016","88019"];

            $checkcontact = Str::substr($contact_number,0,2);
            $checkcontactwithplus = Str::substr($contact_number,0,3);

            //Covert number in format like 01716xxxxxx if start with 88
            $contact_number_n = '';
            if ($checkcontact == 88 || $checkcontactwithplus == '+88')
            {
                //$contact_number_n = $checkcontact == 88 ? Str::substr($contact_number,2,13) : Str::substr($contact_number,3,13); 
                $contact_number_n = $checkcontact == 88 ? Str::substr($contact_number,0,13) : Str::substr($contact_number,1,13); 
            } else {
                $contact_number_n = $contact_number;
            }

            $operator_contacts[] = $contact_number_n;

            $opt = '88'.Str::substr($contact_number_n,0,3);  
            

            $smssentdata[] = [
                'remarks' => $campaing,
                'user_id' => Auth::guard('web')->user()->id,
                'user_sender_id' => $clientsenderids->id,
                'to_number' => $contact_number_n,
                'sms_type' => $this->messagetype,
                'sms_catagory' => $senderidtype,
                'sms_content' => $request->message,
                'number_of_sms' => $this->messagecount,
                'total_contacts' => 1,
                'send_type' => 'api',
                'contact_group_id' => 0,
                'status' => false,
                'submitted_at' => Carbon::now(),
            ];
            
        }
       

        foreach (array_chunk($smssentdata,5000) as $t)  
        {
            $backupstage = DB::table("backups_stage")->get();

            

            if ($backupstage[0]->status) {
                DB::table('user_sent_smses_backup')->insert($t); 

            } else {
                DB::table('user_sent_smses')->insert($t); 
            }
        }

        if (! CheckRuntimeBalance::where('userid',Auth::guard('web')->user()->id)
                                    ->exists()
        ) {

           CheckRuntimeBalance::create([
                'userid' => Auth::guard('web')->user()->id,
                'ischecked' => false
            ]);
            
        }
                    
        $gateway = collect($gateways)->where('status','yes');
        $gatewaycount = collect($gateway)->count();
        

        $checkruntimerotation = DB::table('template_runtime_rotations')
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->get();
                                   

        $checkruntimerotationcount = DB::table('template_runtime_rotations')
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->count();
                                   


        foreach($gateway as $gate)
        {
            $associate_sender_id = $gate->associate_sender_id;
            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
            
            
            $checkruntimerotationcount = DB::table('template_runtime_rotations')
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->count();
                                    
            //if ($checkruntimerotation->isEmpty()) {
            if ($gatewaycount > $checkruntimerotationcount) {
                DB::table('template_runtime_rotations')
                    ->insert([
                        'senderid' => $request->senderid,
                        'associate_sender_id' => $associate_sender_id,
                        'associate_gateway' => $gate->associate_gateway,
                        'template_id' => $gate->template,
                        'user_id' => Auth::guard('web')->user()->id,
                        'rotation_finished' => false,
                        'created_at' => Carbon::now(),
                        'updated_at' => Carbon::now(),
                    ]);

                   
            }
        }

        

        $checkfalseruntimerotation = DB::table('template_runtime_rotations')
                                ->where('rotation_finished',false)
                                ->where('senderid', $request->senderid)
                                ->where('user_id', Auth::guard('web')->user()->id)
                                ->get();
                                
        if (! $checkruntimerotation->isEmpty() && $checkfalseruntimerotation->isEmpty()) {
            DB::table('template_runtime_rotations')
                                ->where('senderid', $request->senderid)
                                ->where('user_id', Auth::guard('web')->user()->id)
                                ->update([
                                    'rotation_finished' => false
                                ]);

                                
        }

        $rotations = DB::table('template_runtime_rotations')
                                ->where('rotation_finished',false)
                                ->where('senderid', $request->senderid)
                                ->where('user_id', Auth::guard('web')->user()->id)
                                ->get();
                                

        foreach($rotations as $runtimerotation) {
            
            switch($runtimerotation->associate_gateway) {
                case 1:
                    //teletalk
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();

                    if (!empty($runtimerotation->template_id))
                    {
                        $template = new TemplateResource(Template::where('id', $runtimerotation->template_id)
                                                                    ->where('status',true)
                                                                    //->where('user_id',Auth::guard('web')->user()->id)
                                                                    ->where('user_type','root')
                                                                    ->first()
                                    );
                        $templatecontent = $template->template_desc;
                       
                    }
                    
                    $r = 0;
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\,\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }
                    
                    if (empty($operator_contacts)) {
                        continue;
                    }

                    $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));
                   
                    $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));
                    
                    foreach($operator_contacts as $opcontact)
                    {
                        if ($r == 0) {
                            $data = [ 
                                "userid"        => Auth::guard('web')->user()->id,
                                "campaing"  => $campaing,
                                "senderidtype" => $senderidtype,
                                "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                "op"		=> "SMS", 
                                "mobile"	    => $opcontact,
                                "messagecount" => $this->messagecount,  
                                "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$request->senderid,     
                                "charset"	=> $this->messagetype, 
                                "sms"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                'post_url' =>  $associate_gateway->api_url,
                                
                                //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                            ];
                            
                            $r = 1;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }

                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            
                            $this->smssend->smsSendToTelitalk($data);
                            $r = 1;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }

                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    break;
                case 2:
                    //gp
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    if (!empty($runtimerotation->template_id))
                    {
                        $template = new TemplateResource(Template::where('id', $runtimerotation->template_id)
                                                                    ->where('status',true)
                                                                    //->where('user_id',Auth::guard('web')->user()->id)
                                                                    ->where('user_type','root')
                                                                    ->first()
                                    );
                        $templatecontent = $template->template_desc;
                    }
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

                    $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {

                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            
                        }

                        $data = [ 
                            "userid"        => Auth::guard('web')->user()->id,
                            "campaing"      => $campaing,
                            "senderidtype" => $senderidtype,
                            "username"		=> $associate_gateway->user,               
                            "password"		=> $associate_gateway->password,  
                            "apicode"		=> "1", 
                            "msisdn"	    => implode(",",$gp100),
                            "messagecount" => $this->messagecount,
                            "countrycode"	=> "880",
                            "messageid"		=> 0,
                            "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                            "messagetype"	=> $this->messagetype, 
                            "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            'post_url'      => $associate_gateway->api_url,
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            
                        ];
                        $this->smssend->smsSendToGp($data);
                        DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [ 
                                    "userid"        => Auth::guard('web')->user()->id,
                                    "campaing"      => $campaing,
                                    "senderidtype" => $senderidtype,
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $this->messagecount,
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $this->messagetype, 
                                    "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];

                                $i = 0;
                                $this->smssend->smsSendToGp($data);
                                unset($gp100);

                                DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [ 
                                "userid"        => Auth::guard('web')->user()->id,
                                "campaing"      => $campaing,
                                "senderidtype" => $senderidtype,
                                "username"		=> $associate_gateway->user,               
                                "password"		=> $associate_gateway->password,  
                                "apicode"		=> "1", 
                                "msisdn"	    => implode(",",$gp100),
                                "messagecount" => $this->messagecount,
                                "countrycode"	=> "880",
                                "messageid"		=> 0,
                                "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                "messagetype"	=> $this->messagetype, 
                                "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                'post_url'      => $associate_gateway->api_url,
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                
                            ];
                            $this->smssend->smsSendToGp($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }

                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 3:
                    //blink
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();

                    if (!empty($runtimerotation->template_id))
                    {
                        $template = new TemplateResource(Template::where('id', $runtimerotation->template_id)
                                                                    ->where('status',true)
                                                                    //->where('user_id',Auth::guard('web')->user()->id)
                                                                    ->where('user_type','root')
                                                                    ->first()
                                    );
                        $templatecontent = $template->template_desc;
                    }
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }*/

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

                    $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));
                    
                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        
                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'msisdn'   => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        $this->smssend->smsSendToBlink($data);
                        DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        

                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];

                                $i = 0;
                                $this->smssend->smsSendToBlink($data);
                                unset($gp100);

                                DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'msisdn'   => implode(",",$gp100),
                                'messagecount' => $opcontact['number_of_sms'],
                                'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                            ];
                            $this->smssend->smsSendToBlink($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }

                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 4: 
                    //robi
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    if (!empty($runtimerotation->template_id))
                    {
                        $template = new TemplateResource(Template::where('id', $runtimerotation->template_id)
                                                                    ->where('status',true)
                                                                    //->where('user_id',Auth::guard('web')->user()->id)
                                                                    ->where('user_type','root')
                                                                    ->first()
                                    );
                        $templatecontent = $template->template_desc;
                    }

                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

                    $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));

                    if (count($operator_contacts) < 200)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }
                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'To'       => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        if ($senderidtype == 'nomask')
                        {
                            $this->smssend->smsSendToRobiNonMask($data);
                        } else {
                            $this->smssend->smsSendToRobi($data);
                        }

                        DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 200)
                            {
                                
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $this->messagecount,
                                    'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                                $i = 0;
                                unset($gp100);

                                DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            //if ($i <= 200)
                            if ($i < 200 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }
                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'To'       => implode(",",$gp100),
                                'messagecount' => $this->messagecount,
                                'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            if ($senderidtype == 'nomask')
                            {
                                $this->smssend->smsSendToRobiNonMask($data);
                            } else {
                                $this->smssend->smsSendToRobi($data);
                            }

                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }

                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 5: 
                    //airtel
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();

                    if (!empty($runtimerotation->template_id))
                    {
                        $template = new TemplateResource(Template::where('id', $runtimerotation->template_id)
                                                                    ->where('status',true)
                                                                    //->where('user_id',Auth::guard('web')->user()->id)
                                                                    ->where('user_type','root')
                                                                    ->first()
                                    );
                                    
                        $templatecontent = $template->template_desc;
                    }
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

                    $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));

                    if (count($operator_contacts) < 200)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }
                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'To'       => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        if ($senderidtype == 'nomask')
                        {
                            $this->smssend->smsSendToRobiNonMask($data);
                        } else {
                            $this->smssend->smsSendToRobi($data);
                        }

                        DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 200)
                            {
                                
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $this->messagecount,
                                    'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                                $i = 0;
                                unset($gp100);

                                DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            //if ($i <= 200)
                            if ($i < 200 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }
                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'To'       => implode(",",$gp100),
                                'messagecount' => $this->messagecount,
                                'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            if ($senderidtype == 'nomask')
                            {
                                $this->smssend->smsSendToRobiNonMask($data);
                            } else {
                                $this->smssend->smsSendToRobi($data);
                            }

                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }

                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 6:
                    //blx
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    if (!empty($runtimerotation->template_id))
                    {
                        $template = new TemplateResource(Template::where('id', $runtimerotation->template_id)
                                                                    ->where('status',true)
                                                                    //->where('user_id',Auth::guard('web')->user()->id)
                                                                    ->where('user_type','root')
                                                                    ->first()
                                    );
                        $templatecontent = $template->template_desc;
                    }

                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

                    $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'msisdn'   => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        $this->smssend->smsSendToBlink($data);
                        DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $this->messagecount,
                                    'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];

                                $i = 0;
                                $this->smssend->smsSendToBlink($data);
                                unset($gp100);
                                DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i< 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'msisdn'   => implode(",",$gp100),
                                'messagecount' => $this->messagecount,
                                'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            $this->smssend->smsSendToBlink($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 7: 
                    //gpx
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();

                    if (!empty($runtimerotation->template_id))
                    {
                        $template = new TemplateResource(Template::where('id', $runtimerotation->template_id)
                                                                    ->where('status',true)
                                                                    //->where('user_id',Auth::guard('web')->user()->id)
                                                                    ->where('user_type','root')
                                                                    ->first()
                                    );
                        $templatecontent = $template->template_desc;
                    }
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

                    $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {

                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        $data = [ 
                            "userid"        => Auth::guard('web')->user()->id,
                            "campaing"      => $campaing,
                            "senderidtype" => $senderidtype,
                            "username"		=> $associate_gateway->user,               
                            "password"		=> $associate_gateway->password,  
                            "apicode"		=> "1", 
                            "msisdn"	    => implode(",",$gp100),
                            "messagecount" => $this->messagecount,
                            "countrycode"	=> "880",
                            "messageid"		=> 0,
                            "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                            "messagetype"	=> $this->messagetype, 
                            "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            'post_url'      => $associate_gateway->api_url,
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            
                        ];
                        $this->smssend->smsSendToGp($data);
                        DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [ 
                                    "userid"        => Auth::guard('web')->user()->id,
                                    "campaing"      => $campaing,
                                    "senderidtype" => $senderidtype,
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $this->messagecount,
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $this->messagetype, 
                                    "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];

                                $i = 0;
                                $this->smssend->smsSendToGp($data);
                                unset($gp100);
                                DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [ 
                                "userid"        => Auth::guard('web')->user()->id,
                                "campaing"      => $campaing,
                                "senderidtype" => $senderidtype,
                                "username"		=> $associate_gateway->user,               
                                "password"		=> $associate_gateway->password,  
                                "apicode"		=> "1", 
                                "msisdn"	    => implode(",",$gp100),
                                "messagecount" => $this->messagecount,
                                "countrycode"	=> "880",
                                "messageid"		=> 0,
                                "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                "messagetype"	=> $this->messagetype, 
                                "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                'post_url'      => $associate_gateway->api_url,
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                
                            ];
                            $this->smssend->smsSendToGp($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 8: 
                    //rankstel
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();

                    if (!empty($runtimerotation->template_id))
                    {
                        $template = new TemplateResource(Template::where('id', $runtimerotation->template_id)
                                                                    ->where('status',true)
                                                                    //->where('user_id',Auth::guard('web')->user()->id)
                                                                    ->where('user_type','root')
                                                                    ->first()
                                    );
                        $templatecontent = $template->template_desc;
                    }
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

                    $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        
                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'credential'		=> "$associate_gateway->user:$associate_gateway->password",              
                            'username'		=> $associate_gateway->user,         
                            'password'		=> $associate_gateway->password,
                            'msisdn'   => implode(",",$gp100),
                            'messagecount' =>  $this->messagecount,
                            "messagetype"	=> $this->messagetype,
                            'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        $this->smssend->smsSendToRanksTel($data);
                        DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'credential'		=> "$associate_gateway->user:$associate_gateway->password",              
                                    'username'		=> $associate_gateway->user,             
                                    'password'		=> $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' =>  $this->messagecount,
                                    "messagetype"	=> $this->messagetype,
                                    'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];

                                $i = 0;
                                $this->smssend->smsSendToRanksTel($data);
                                unset($gp100);
                                DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                    unset($operator_contacts[$key]);
                                }
                                continue;
                            }

                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'credential'		=> "$associate_gateway->user:$associate_gateway->password",              
                                'username'		=> $associate_gateway->user,              
                                'password'		=> $associate_gateway->password,
                                'msisdn'   => implode(",",$gp100),
                                'messagecount' =>  $this->messagecount,
                                "messagetype"	=> $this->messagetype,
                                'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            $this->smssend->smsSendToRanksTel($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 9: 
                    //gp-3
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();

                    if (!empty($runtimerotation->template_id))
                    {
                        $template = new TemplateResource(Template::where('id', $runtimerotation->template_id)
                                                                    ->where('status',true)
                                                                    //->where('user_id',Auth::guard('web')->user()->id)
                                                                    ->where('user_type','root')
                                                                    ->first()
                                    );
                        $templatecontent = $template->template_desc;
                    }
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

                    $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {

                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        $data = [ 
                            "userid"        => Auth::guard('web')->user()->id,
                            "campaing"      => $campaing,
                            "senderidtype" => $senderidtype,
                            "username"		=> $associate_gateway->user,               
                            "password"		=> $associate_gateway->password,  
                            "apicode"		=> "1", 
                            "msisdn"	    => implode(",",$gp100),
                            "messagecount" => $this->messagecount,
                            "countrycode"	=> "880",
                            "messageid"		=> 0,
                            "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                            "messagetype"	=> $this->messagetype, 
                            "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            'post_url'      => $associate_gateway->api_url,
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            
                        ];
                        $this->smssend->smsSendToGp($data);
                        DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [ 
                                    "userid"        => Auth::guard('web')->user()->id,
                                    "campaing"      => $campaing,
                                    "senderidtype" => $senderidtype,
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $this->messagecount,
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $this->messagetype, 
                                    "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];

                                $i = 0;
                                $this->smssend->smsSendToGp($data);
                                unset($gp100);
                                DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [ 
                                "userid"        => Auth::guard('web')->user()->id,
                                "campaing"      => $campaing,
                                "senderidtype" => $senderidtype,
                                "username"		=> $associate_gateway->user,               
                                "password"		=> $associate_gateway->password,  
                                "apicode"		=> "1", 
                                "msisdn"	    => implode(",",$gp100),
                                "messagecount" => $this->messagecount,
                                "countrycode"	=> "880",
                                "messageid"		=> 0,
                                "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                "messagetype"	=> $this->messagetype, 
                                "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                'post_url'      => $associate_gateway->api_url,
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                
                            ];
                            $this->smssend->smsSendToGp($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 10: 
                    //gp-2
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();

                    if (!empty($runtimerotation->template_id))
                    {
                        $template = new TemplateResource(Template::where('id', $runtimerotation->template_id)
                                                                    ->where('status',true)
                                                                    //->where('user_id',Auth::guard('web')->user()->id)
                                                                    ->where('user_type','root')
                                                                    ->first()
                                    );
                        $templatecontent = $template->template_desc;
                    }
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

                    $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {

                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        $data = [ 
                            "userid"        => Auth::guard('web')->user()->id,
                            "campaing"      => $campaing,
                            "senderidtype" => $senderidtype,
                            "username"		=> $associate_gateway->user,               
                            "password"		=> $associate_gateway->password,  
                            "apicode"		=> "1", 
                            "msisdn"	    => implode(",",$gp100),
                            "messagecount" => $this->messagecount,
                            "countrycode"	=> "880",
                            "messageid"		=> 0,
                            "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                            "messagetype"	=> $this->messagetype, 
                            "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            'post_url'      => $associate_gateway->api_url,
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            
                        ];
                        $this->smssend->smsSendToGp($data);
                        DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [ 
                                    "userid"        => Auth::guard('web')->user()->id,
                                    "campaing"      => $campaing,
                                    "senderidtype" => $senderidtype,
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $this->messagecount,
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $this->messagetype, 
                                    "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];

                                $i = 0;
                                $this->smssend->smsSendToGp($data);
                                unset($gp100);
                                DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [ 
                                "userid"        => Auth::guard('web')->user()->id,
                                "campaing"      => $campaing,
                                "senderidtype" => $senderidtype,
                                "username"		=> $associate_gateway->user,               
                                "password"		=> $associate_gateway->password,  
                                "apicode"		=> "1", 
                                "msisdn"	    => implode(",",$gp100),
                                "messagecount" => $this->messagecount,
                                "countrycode"	=> "880",
                                "messageid"		=> 0,
                                "cli"	  	    => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,     
                                "messagetype"	=> $this->messagetype, 
                                "message"		=> empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                'post_url'      => $associate_gateway->api_url,
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                
                            ];
                            $this->smssend->smsSendToGp($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 15: 
                    //EasyWeb
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();

                    if (!empty($runtimerotation->template_id))
                    {
                        $template = new TemplateResource(Template::where('id', $runtimerotation->template_id)
                                                                    ->where('status',true)
                                                                    //->where('user_id',Auth::guard('web')->user()->id)
                                                                    ->where('user_type','root')
                                                                    ->first()
                                    );
                        $templatecontent = $template->template_desc;
                    }
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

                    $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'msisdn'   => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        $this->smssend->smsSendToEasyWeb($data);
                        DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $this->messagecount,
                                    'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];

                                $i = 0;
                                $this->smssend->smsSendToEasyWeb($data);
                                unset($gp100);
                                DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'msisdn'   => implode(",",$gp100),
                                'messagecount' => $this->messagecount,
                                'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            $this->smssend->smsSendToEasyWeb($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                case 16: 
                    //Banglaphone
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();

                    if (!empty($runtimerotation->template_id))
                    {
                        $template = new TemplateResource(Template::where('id', $runtimerotation->template_id)
                                                                    ->where('status',true)
                                                                    //->where('user_id',Auth::guard('web')->user()->id)
                                                                    ->where('user_type','root')
                                                                    ->first()
                                    );
                        $templatecontent = $template->template_desc;
                    }
                    
                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

                    $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));

                    if (count($operator_contacts) < 100)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }

                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'username' => $associate_gateway->user,
                            'password' => $associate_gateway->password,
                            'msisdn'   => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        $this->smssend->smsSendToBanglaPhone($data);
                        DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 100)
                            {
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $this->messagecount,
                                    'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];

                                $i = 0;
                                $this->smssend->smsSendToBanglaPhone($data);
                                unset($gp100);
                                DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            if ($i < 100 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }

                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'username' => $associate_gateway->user,
                                'password' => $associate_gateway->password,
                                'msisdn'   => implode(",",$gp100),
                                'messagecount' => $this->messagecount,
                                'sender'   => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            $this->smssend->smsSendToBanglaPhone($data);
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break; 
                case 18: 
                    $associate_gateway = Gateway::where('id',$runtimerotation->associate_gateway)->first();
                    
                    if (!empty($runtimerotation->template_id))
                    {
                        $template = new TemplateResource(Template::where('id', $runtimerotation->template_id)
                                                                    ->where('status',true)
                                                                    //->where('user_id',Auth::guard('web')->user()->id)
                                                                    ->where('user_type','root')
                                                                    ->first()
                                    );
                        $templatecontent = $template->template_desc;
                    }

                    $gp100 = [];
                    $i = 0;
                    $j = 0;
                    $data = [];
                    /*$string = str_replace(" ", "", $request->message);
                    if (!is_numeric($string)) {
                        return "Invalid Format";
                    }
                    */

                    if (!preg_match('/^[0-9-\s\.\_]+$/D', $request->message)) {
                        return "Invalid Format";
                    }

                    if (empty($operator_contacts)) {
                        continue;
                    }

                    $this->messagecount = empty($templatecontent) ? $this->smssend->manageSmsMessageCount($request->message) : $this->smssend->manageSmsMessageCount(str_replace("{code}",$request->message,$templatecontent));

                    $this->messagetype = empty($templatecontent) ? $this->smssend->smsMessageType($request->message) : $this->smssend->smsMessageType(str_replace("{code}",$request->message,$templatecontent));

                    if (count($operator_contacts) < 200)
                    {
                        foreach($operator_contacts as $opcontact)
                        {
                            $gp100[] = $opcontact;
                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                        }
                        $data = [
                            'userid'   => Auth::guard('web')->user()->id,
                            'campaing' => $campaing,
                            'senderidtype' => $senderidtype,
                            'post_url' => $associate_gateway->api_url,
                            'To'       => implode(",",$gp100),
                            'messagecount' => $this->messagecount,
                            'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                            'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            
                            //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                        ];
                        if ($senderidtype == 'nomask')
                        {
                            $this->smssend->smsSendToRobiNonMask($data);
                        } else {
                            $this->smssend->smsSendToRobi($data);
                        }

                        DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                    } else {
                        foreach($operator_contacts as $opcontact)
                        {
                            
                            if (count($gp100) == 200)
                            {
                                
                                $data = [
                                    'userid'   => Auth::guard('web')->user()->id,
                                    'campaing' => $campaing,
                                    'senderidtype' => $senderidtype,
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $this->messagecount,
                                    'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                    'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                    'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                                $i = 0;
                                unset($gp100);

                                DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                            }
                            //if ($i <= 200)
                            if ($i < 200 && $j < count($operator_contacts))
                            {

                                $gp100[] = $opcontact;
                                $i++;
                                $j++;
                                if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }
                                continue;
                            }
                            $data = [
                                'userid'   => Auth::guard('web')->user()->id,
                                'campaing' => $campaing,
                                'senderidtype' => $senderidtype,
                                'post_url' => $associate_gateway->api_url,
                                'To'       => implode(",",$gp100),
                                'messagecount' => $this->messagecount,
                                'From'     => str_replace('\"'," ",$runtimerotation->associate_sender_id),//$clientsenderids->sender_name,
                                'Message'  => empty($templatecontent) ? $request->message : str_replace("{code}",$request->message,$templatecontent),
                                'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                                'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                                
                                //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                            ];
                            if ($senderidtype == 'nomask')
                            {
                                $this->smssend->smsSendToRobiNonMask($data);
                            } else {
                                $this->smssend->smsSendToRobi($data);
                            }

                            if (($key = array_search($opcontact, $operator_contacts)) !== false) {
                                unset($operator_contacts[$key]);
                            }

                            DB::table('template_runtime_rotations')
                                    ->where('rotation_finished',false)
                                    ->where('senderid', $request->senderid)
                                    ->where('user_id', Auth::guard('web')->user()->id)
                                    ->where('associate_sender_id',$runtimerotation->associate_sender_id)
                                    ->where('template_id',$runtimerotation->template_id)
                                    ->where('id',$runtimerotation->id)
                                    ->update([
                                        'rotation_finished' => true
                                    ]);
                        }
                    }
                    //return $data;
                    break;
                default: 
                    return response()->json(['errmsg' => 'No Gateway Found'],406);  
            }
        }

        $clientmasksmsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'mask');
        $clientnonmasksmsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'nomask');
        $clientvoicemsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'voice');

        $totalmaskbal_1 = ($clientmasksmsbal_1-$this->consumesms->totalConsumeMaskBalance($clientid->id));
        $totalnonmaskbal_1 = ($clientnonmasksmsbal_1-$this->consumesms->totalConsumeNonMaskBalance($clientid->id));
        $totalvoicebal_1 = ($clientvoicemsbal_1-$this->consumesms->totalConsumeVoiceBalance($clientid->id));

        $camid = substr($campaing,9, strlen($campaing));
        
        if ($totalmaskbal_1 <= $totalmaskbal || $totalnonmaskbal_1 <= $totalnonmaskbal || $totalvoicebal_1<= $totalvoicebal)
        {
            if ($senderidtype == 'mask')
            {
                if (session()->has('sendsuccess'))
                {
                    return response()->json(['msg' => session()->get('sendsuccess'),'mask' => $totalmaskbal_1,'MessageId' => $camid],200);
                }

                if (session()->has('senderr'))
                {
                    return response()->json(['errmsg' => session()->get('senderr')],406);
                }
                //return response()->json(['msg' => 'SMS succesfully sent','mask' => $totalmaskbal_1],200);
            } else if ($senderidtype == 'nomask') {
                if (session()->has('sendsuccess'))
                {
                    return response()->json(['msg' => session()->get('sendsuccess'),'nonmask' => $totalnonmaskbal_1,'MessageId' => $camid],200);
                }

                if (session()->has('senderr'))
                {
                    return response()->json(['errmsg' => session()->get('senderr')],406);
                }
                //return response()->json(['msg' => 'SMS succesfully sent','nomask' => $totalnonmaskbal_1],200);
            } else if ($senderidtype == 'voice') {
                if (session()->has('sendsuccess'))
                {
                    return response()->json(['msg' => session()->get('sendsuccess'),'voicemask' => $totalvoicebal_1,'MessageId' => $camid],200);
                }

                if (session()->has('senderr'))
                {
                    return response()->json(['errmsg' => session()->get('senderr')],406);
                }
                //return response()->json(['msg' => 'SMS succesfully sent','voice' => $totalvoicebal_1],200);
            } else {
                return 0;
            }
        } else {
            if (session()->has('sendsuccess'))
            {
                return response()->json(['msg' => session()->get('sendsuccess'),'mask' => $totalmaskbal_1,'MessageId' => $camid],200);
            }

            if (session()->has('senderr'))
            {
                return response()->json(['errmsg' => session()->get('senderr')],406);
            }
            //return response()->json(['errmsg' => 'There is an error, with the senderid, please contact with vendor'],406);
        }
    }

    public function dlrReport() {
        sleep(4);
        Log::channel('customlog')->info('Hello world & send dlr!!');
        $drldate = \Carbon\Carbon::now();
        if (session()->has('sendsuccess'))
        {
            $multino = session()->get('multino');
            $dlrrptsuccess = session()->get('dlrrptsuccess');


            if (session()->has('multino') && !$multino) {
                
                if ($dlrrptsuccess) {
                    
                    $client = new Client([
                        'verify' => false,
                        'headers' => [ 'Content-Type' => 'application/json' ]
                    ]);

                    

                    $clientresponse = $client->request('POST','https://httpsmsc.montymobile.com/HTTP/api/Vendor/DLRListener',[
                        'body' => json_encode([ 
                            'username' => '9611748847',//$camid,//$resarr['MessageId'],
                            'password' => 'Monty$$$3737',
                            'sender' => session()->get('sender'),
                            'destination' => session()->get('destination'),
                            'messageId' => session()->get('messageId'),
                            'deliveryStatus' => 2,
                            //'dateReceived' => $drldate->addSecond(2),
                            'description' => 'Delivered',
                        ])
                    ]);

                    //return $clientresponse->getBody();

                }
            } else if (session()->has('multino') && $multino){
                
                if ($dlrrptsuccess) {
                    
                    $client = new Client([
                        'verify' => false,
                        'headers' => [ 'Content-Type' => 'application/json' ]
                    ]);

                    

                    foreach(session()->get('destination') as $record) {
                        
                        $clientresponse = $client->request('POST','https://httpsmsc.montymobile.com/HTTP/api/Vendor/DLRListener',[
                            'body' => json_encode([ 
                                'username' => '9611748847',//$camid,//$resarr['MessageId'],
                                'password' => 'Monty$$$3737',
                                'sender' => session()->get('sender'),
                                'destination' => $record,
                                'messageId' => session()->get('messageId'),
                                'deliveryStatus' => 2,
                                //'dateReceived' => $drldate->addSecond(2),
                                'description' => 'Delivered',
                            ])
                        ]);

                        //return $clientresponse->getBody();
                    }
                }
                
            }
        }

        if (session()->has('senderr')) {

            if (session()->has('multino') && !$multino) {
                            
                if ($dlrrptsuccess) {
                    
                    $client = new Client([
                        'verify' => false,
                        'headers' => [ 'Content-Type' => 'application/json' ]
                    ]);

                    $clientresponse = $client->request('POST','https://httpsmsc.montymobile.com/HTTP/api/Vendor/DLRListener',[
                        'body' => json_encode([ 
                            'username' => '9611748847',//$camid,//$resarr['MessageId'],
                            'password' => 'Monty$$$3737',
                            'sender' => session()->get('sender'),
                            'destination' => session()->get('destination'),
                            'messageId' => session()->get('messageId'),
                            'deliveryStatus' => 5,
                            'dateReceived' => $drldate->addSecond(2),
                            'description' => 'Undelivered',
                        ])
                    ]);
                }
            } else if (session()->has('multino') && $multino){
                
                if ($dlrrptsuccess) {
                    
                    $client = new Client([
                        'verify' => false,
                        'headers' => [ 'Content-Type' => 'application/json' ]
                    ]);

                    foreach(session()->get('destination') as $record) {
                        $clientresponse = $client->request('POST','https://httpsmsc.montymobile.com/HTTP/api/Vendor/DLRListener',[
                            'body' => json_encode([ 
                                'username' => '9611748847',//$camid,//$resarr['MessageId'],
                                'password' => 'Monty$$$3737',
                                'sender' => session()->get('sender'),
                                'destination' => $record,
                                'messageId' => session()->get('messageId'),
                                'deliveryStatus' => 5,
                                'dateReceived' => $drldate->addSecond(2),
                                'description' => 'Undelivered',
                            ])
                        ]);
                    }
                }
                
            }
        }
    }

    

    public function hitMonty() {
        $client = new Client([
            'verify' => false,
            'headers' => [ 'Content-Type' => 'application/json' ]
        ]);

        

        $clientresponse = $client->request('POST','https://httpsmsc.montymobile.com/HTTP/api/Vendor/DLRListener',[
            'body' => json_encode([ 
                'username' => '9611748847',//$camid,//$resarr['MessageId'],
                'password' => 'Monty$$$3737',
                'sender' => 8801552146120,
                'destination' => 8801716187302,
                'messageId' => 98211597960881,
                'deliveryStatus' => 2,
                //'dateReceived' => $drldate->addSecond(2),
                'description' => 'Delivered',
            ])
        ]);

        Log::channel('smslog')->info('2nd response: '. $clientresponse->getBody(). ' -- Time: '. date('y-m-d h:i:s'));
        return $clientresponse->getBody();

        // $multino = session()->get('multino');
        // $dlrrptsuccess = session()->get('dlrrptsuccess');

        // if (session()->has('sendsuccess'))
        // {
        //     if (session()->has('multino') && !$multino) {
                
        //         if ($dlrrptsuccess) {
                    
        //             $client = new Client([
        //                 'verify' => false,
        //                 'headers' => [ 'Content-Type' => 'application/json' ]
        //             ]);

                    

        //             $clientresponse = $client->request('POST','https://httpsmsc.montymobile.com/HTTP/api/Vendor/DLRListener',[
        //                 'body' => json_encode([ 
        //                     'username' => '9611748847',//$camid,//$resarr['MessageId'],
        //                     'password' => 'Monty$$$3737',
        //                     'sender' => session()->get('sender'),
        //                     'destination' => session()->get('destination'),
        //                     'messageId' => session()->get('messageId'),
        //                     'deliveryStatus' => 2,
        //                     //'dateReceived' => $drldate->addSecond(2),
        //                     'description' => 'Delivered',
        //                 ])
        //             ]);

        //             return $clientresponse->getBody();

        //         }
        //     } else if (session()->has('multino') && $multino){
                
        //         if ($dlrrptsuccess) {
                    
        //             $client = new Client([
        //                 'verify' => false,
        //                 'headers' => [ 'Content-Type' => 'application/json' ]
        //             ]);

                    

        //             foreach(session()->get('destination') as $record) {
                        
        //                 $clientresponse = $client->request('POST','https://httpsmsc.montymobile.com/HTTP/api/Vendor/DLRListener',[
        //                     'body' => json_encode([ 
        //                         'username' => '9611748847',//$camid,//$resarr['MessageId'],
        //                         'password' => 'Monty$$$3737',
        //                         'sender' => session()->get('sender'),
        //                         'destination' => $record,
        //                         'messageId' => session()->get('messageId'),
        //                         'deliveryStatus' => 2,
        //                         //'dateReceived' => $drldate->addSecond(2),
        //                         'description' => 'Delivered',
        //                     ])
        //                 ]);

        //                 return $clientresponse->getBody();
        //             }
        //         }
                
        //     }
        // }

        // if (session()->has('senderr'))
        // {
            
        //     //$this->dlrReport('error');
        //     //$this->haltScript('https://monty.fedsms.com/submitdlr-for-monty','GET');
        //     echo json_encode(['errmsg' => session()->get('senderr')]);
        //     $multino = session()->get('multino');
        //     $dlrrptsuccess = session()->get('dlrrptsuccess');
        //     if (session()->has('multino') && !$multino) {
                    
        //         if ($dlrrptsuccess) {
                    
        //             $client = new Client([
        //                 'verify' => false,
        //                 'headers' => [ 'Content-Type' => 'application/json' ]
        //             ]);

        //             $clientresponse = $client->request('POST','https://httpsmsc.montymobile.com/HTTP/api/Vendor/DLRListener',[
        //                 'body' => json_encode([ 
        //                     'username' => '9611748847',//$camid,//$resarr['MessageId'],
        //                     'password' => 'Monty$$$3737',
        //                     'sender' => session()->get('sender'),
        //                     'destination' => session()->get('destination'),
        //                     'messageId' => session()->get('messageId'),
        //                     'deliveryStatus' => 5,
        //                     'dateReceived' => $drldate->addSecond(2),
        //                     'description' => 'Undelivered',
        //                 ])
        //             ]);

        //             return $clientresponse->getBody();
        //         }
        //     } else if (session()->has('multino') && $multino){
                
        //         if ($dlrrptsuccess) {
                    
        //             $client = new Client([
        //                 'verify' => false,
        //                 'headers' => [ 'Content-Type' => 'application/json' ]
        //             ]);

        //             foreach(session()->get('destination') as $record) {
        //                 $clientresponse = $client->request('POST','https://httpsmsc.montymobile.com/HTTP/api/Vendor/DLRListener',[
        //                     'body' => json_encode([ 
        //                         'username' => '9611748847',//$camid,//$resarr['MessageId'],
        //                         'password' => 'Monty$$$3737',
        //                         'sender' => session()->get('sender'),
        //                         'destination' => $record,
        //                         'messageId' => session()->get('messageId'),
        //                         'deliveryStatus' => 5,
        //                         'dateReceived' => $drldate->addSecond(2),
        //                         'description' => 'Undelivered',
        //                     ])
        //                 ]);

        //                 return $clientresponse->getBody();
        //             }
        //         }
                
        //     }
        //     //DlrPUshJob::dispatch('error')->delay(now()->addSeconds(2));
        //     //DlrPushEvent::dispatch('error');

        //     //return $rsp = response()->json(['errmsg' => session()->get('senderr')],406);
            
        //     //echo json_encode(['errmsg' => session()->get('senderr')]);
        //     //return response()->json(['errmsg' => session()->get('senderr')],406);
        // }

        // Log::channel('customlog')->info('2nd response: '. $clientresponse->getBody(). ' -- Time: '. date('y-m-d h:i:s'));


    }

    public function responseApi(Request $request)
    {

		$this->fastRequest('https://monty.fedsms.com/push-monty-dlr',[
            'api_token' => 'UncHialxB3FDa60M3uvQYpqbe4o4YpiHRyga2HtO'
        ],'GET');
		
		$client = new Client([
                                'verify' => false,
                             
                            ]);
        $response = $client->request('GET','https://monty.fedsms.com/api/send-sms',[
                                'query' => [
                                	'api_token' => $request->api_token,
                                	'senderid'  => $request->senderid,
                                	'message'   => $request->message,
                                	'contact_number'   => $request->contact_number,
                                	 ]
                            ]);
        Log::channel('smslog')->info('1st response: '. $response->getBody(). ' -- Time: '. date('y-m-d h:i:s'));
        //Log::Debug('1st response: '. $response->getBody(). ' -- Time: '. date('y-m-d h:i:s'));
		echo "1st request done. wait 3 seconds for the 2nd request to be done.";
	}

	//2nd call to self api
    public function pusherApi(Request $request)
    {
	    sleep(3);
		$response = Http::timeout(0)->get('https://monty.fedsms.com/api/hit-monty',[
            'api_token' => $request->api_token
        ]);
        // $client = new Client([
        //     'verify' => false,
         
        // ]);
        // $response = $client->request('GET','https://monty.fedsms.com/api/hit-monty?api_token=UncHialxB3FDa60M3uvQYpqbe4o4YpiHRyga2HtO');

        Log::channel('smslog')->info('2nd response: '. $response->getBody(). ' -- Time: '. date('y-m-d h:i:s'));
	}

	//socket connection for asynchronous
	function fastRequest($url, $params, $type='POST')
	{
        foreach ($params as $key => &$val) {
            if (is_array($val)) $val = implode(',', $val);
            $post_params[] = $key.'='.urlencode($val);
        }
        $post_string = implode('&', $post_params);
	    $parts=parse_url($url);
        $fp = fsockopen($parts['host'],isset($parts['port'])?$parts['port']:80,$errno, $errstr, 30);
        // Data goes in the path for a GET request
        if('GET' == $type) {
            $parts['path'] .= '?'.$post_string;
        }
	    /*$out = "GET ".$parts['path']." HTTP/1.1\r\n";
	    $out.= "Host: ".$parts['host']."\r\n";
	    $out.= "Content-Length: 0"."\r\n";
        $out.= "Connection: Close\r\n\r\n";
        */
        $out = "$type ".$parts['path']." HTTP/1.1\r\n";
        $out.= "Host: ".$parts['host']."\r\n";
        $out.= "Content-Type: application/x-www-form-urlencoded\r\n";
        $out.= "Content-Length: ".strlen($post_string)."\r\n";
        $out.= "Connection: Close\r\n\r\n";
        // Data goes in the request body for a POST request
        if ('POST' == $type && isset($post_string)){ 
            $out.= $post_string;
        }
	    fwrite($fp, $out);
	    fclose($fp);
	}

    public function manageSmsesMessage(Request $request)
    {
        Auth::guard('web')->login($request->user());
        
        $campaing = !empty($request->cam_name) ? $request->cam_name."-".Auth::guard('web')->user()->id : 'campaing-'.Auth::guard('web')->user()->id.date("d").time();
        
        $clientsenderids = $this->smssend->getSenderIdInformationBySenderName($request->senderid);
        
        if (! $clientsenderids instanceof SmsSenderIdResource)
        {
            return response()->json(['errmsg' => $clientsenderids->getData()->errmsg], 406);
        }

        $gateways = json_decode($clientsenderids->gateway_info);

        if (empty($gateways))
        {
            $gateways = $clientsenderids;
        }


        $contacts = [];

        $this->messagecount = $this->smssend->manageSmsMessageCount($request->message);

        $this->messagetype = $this->smssend->smsMessageType($request->message);

        $senderidtype = $this->smssend->getSenderIdType(['senderid' => $request->senderid]);

        $clientid = Auth::guard('web')->user();

        $clientmasksmsbal = $this->product->getSmsBalanceByCategory($clientid->id,'mask');
        $clientnonmasksmsbal = $this->product->getSmsBalanceByCategory($clientid->id,'nomask');
        $clientvoicemsbal = $this->product->getSmsBalanceByCategory($clientid->id,'voice');

        $totalmaskbal = ($clientmasksmsbal-$this->consumesms->totalConsumeMaskBalance($clientid->id));
        $totalnonmaskbal = ($clientnonmasksmsbal-$this->consumesms->totalConsumeNonMaskBalance($clientid->id));
        $totalvoicebal = ($clientvoicemsbal-$this->consumesms->totalConsumeVoiceBalance($clientid->id));


        $root_userid = Auth::guard('web')->user()->root_user_id;

        $reseller_id = Auth::guard('web')->user()->reseller_id;

        

        //Single contact number start
        if ($request->numbertype == 'group')
        {
            $contacts =  explode(",",str_replace("\n",",",str_replace(" ",",",$request->contact_number)));

            $totalSms = ($this->messagecount*count($contacts));

            if ($totalmaskbal < $totalSms && $senderidtype == 'mask')
            {
                return response()->json(['errmsg' => "Insufficient mask sms balance"], 406);
            }

            if ($totalnonmaskbal < $totalSms && $senderidtype == 'nomask')
            {
                return response()->json(['errmsg' => "Insufficient nonmask sms balance"], 406);
            }

            if ($totalvoicebal < $totalSms && $senderidtype == 'voice')
            {
                return response()->json(['errmsg' => "Insufficient voice sms balance"], 406);
            }

        } else {
            $contacts =  explode(",",str_replace("\n",",",str_replace(" ",",",$request->contact_number)));//$request->numbertype == 'contgroup' ? $this->validMobile($request) : $this->validMobileFromFile($request);

            $this->validMobileInRequest($request);
            
            $totalValidContact = $this->totalValidContact;

            $totalSms = ($totalValidContact*$this->messagecount);

            if ($totalmaskbal < $totalSms && $senderidtype == 'mask')
            {
                return response()->json(['errmsg' => "Insufficient mask sms balance"], 406);
            }

            if ($totalnonmaskbal < $totalSms && $senderidtype == 'nomask')
            {
                return response()->json(['errmsg' => "Insufficient nonmask sms balance"], 406);
            }

            if ($totalvoicebal < $totalSms && $senderidtype == 'voice')
            {
                return response()->json(['errmsg' => "Insufficient voice sms balance"], 406);
            }
        }
        
        $smssentdata = [];

        $operator_contacts = [];

        foreach(array_unique($contacts) as $contact_number)
        {
            
            $validprefix =  ["88017","88014","88013","88015","88018","88016","88019"];

            $checkcontact = Str::substr($contact_number,0,2);
            $checkcontactwithplus = Str::substr($contact_number,0,3);

            //Covert number in format like 01716xxxxxx if start with 88
            $contact_number_n = '';
            $opt = '';
            if ($checkcontact == 88 || $checkcontactwithplus == '+88')
            {
                $contact_number_n = $checkcontact == 88 ? Str::substr($contact_number,0,13) : Str::substr($contact_number,1,13); 
                $opt = Str::substr($contact_number_n,0,5);
            } else {
                $contact_number_n = $contact_number;
                $opt = '88'.Str::substr($contact_number_n,0,3);
            }

            /*$sent_sms = new UserSentSmsResource(UserSentSms::create([
                'remarks' => $campaing,
                'user_id' => Auth::guard('web')->user()->id,
                'user_sender_id' => $clientsenderids->id,
                'to_number' => $contact_number_n,
                'sms_type' => $this->messagetype,
                'sms_catagory' => $senderidtype,
                'sms_content' => $request->message,
                'number_of_sms' => $this->messagecount,
                'total_contacts' => 1,
                'send_type' => 'smsadmin',
                'contact_group_id' => 0,
                'status' => false,
                'submitted_at' => Carbon::now(),
            ]));*/

            //$opt = '88'.Str::substr($contact_number_n,0,3);  
                    
            if (in_array($opt, $validprefix))
            {
                if ($opt == "88017")
                {
                    $operator_contacts['gp'][] = [
                        'contact' => $contact_number_n,
                        'userid' => Auth::guard('web')->user()->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => $this->messagetype,
                        'sms_content' => $request->message,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        //'user_sent_sms_id' => $sent_sms->id
                    ];

                    $smssentdata[] = [
                        'remarks' => $campaing,
                        'user_id' => Auth::guard('web')->user()->id,
                        'user_sender_id' => $clientsenderids->id,
                        'to_number' => $contact_number_n,
                        'sms_type' => $this->messagetype,
                        'sms_catagory' => $senderidtype,
                        'sms_content' => $request->message,
                        'number_of_sms' => $this->messagecount,
                        'total_contacts' => 1,
                        'send_type' => 'api',
                        'contact_group_id' => 0,
                        'status' => false,
                        'submitted_at' => Carbon::now(),
                    ];
                    
                }

                if ($opt == "88013")
                {
                    $operator_contacts['gpx'][] = [
                        'contact' => $contact_number_n,
                        'userid' => Auth::guard('web')->user()->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => $this->messagetype,
                        'sms_content' => $request->message,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        //'user_sent_sms_id' => $sent_sms->id
                    ];

                    $smssentdata[] = [
                        'remarks' => $campaing,
                        'user_id' => Auth::guard('web')->user()->id,
                        'user_sender_id' => $clientsenderids->id,
                        'to_number' => $contact_number_n,
                        'sms_type' => $this->messagetype,
                        'sms_catagory' => $senderidtype,
                        'sms_content' => $request->message,
                        'number_of_sms' => $this->messagecount,
                        'total_contacts' => 1,
                        'send_type' => 'api',
                        'contact_group_id' => 0,
                        'status' => false,
                        'submitted_at' => Carbon::now(),
                    ];
                }

                if ($opt == "88019")
                {
                    $operator_contacts['blink'][] = [
                        'contact' => $contact_number_n,
                        'userid' => Auth::guard('web')->user()->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => $this->messagetype,
                        'sms_content' => $request->message,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        //'user_sent_sms_id' => $sent_sms->id
                    ];

                    $smssentdata[] = [
                        'remarks' => $campaing,
                        'user_id' => Auth::guard('web')->user()->id,
                        'user_sender_id' => $clientsenderids->id,
                        'to_number' => $contact_number_n,
                        'sms_type' => $this->messagetype,
                        'sms_catagory' => $senderidtype,
                        'sms_content' => $request->message,
                        'number_of_sms' => $this->messagecount,
                        'total_contacts' => 1,
                        'send_type' => 'api',
                        'contact_group_id' => 0,
                        'status' => false,
                        'submitted_at' => Carbon::now(),
                    ];
                }

                if ($opt == "88014")
                {
                    $operator_contacts['blx'][] = [
                        'contact' => $contact_number_n,
                        'userid' => Auth::guard('web')->user()->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => $this->messagetype,
                        'sms_content' => $request->message,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        //'user_sent_sms_id' => $sent_sms->id
                    ];

                    $smssentdata[] = [
                        'remarks' => $campaing,
                        'user_id' => Auth::guard('web')->user()->id,
                        'user_sender_id' => $clientsenderids->id,
                        'to_number' => $contact_number_n,
                        'sms_type' => $this->messagetype,
                        'sms_catagory' => $senderidtype,
                        'sms_content' => $request->message,
                        'number_of_sms' => $this->messagecount,
                        'total_contacts' => 1,
                        'send_type' => 'api',
                        'contact_group_id' => 0,
                        'status' => false,
                        'submitted_at' => Carbon::now(),
                    ];
                }

                if ($opt == "88015")
                {
                    $operator_contacts['teletalk'][] = [
                        'contact' => $contact_number_n,
                        'userid' => Auth::guard('web')->user()->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => $this->messagetype,
                        'sms_content' => $request->message,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        //'user_sent_sms_id' => $sent_sms->id
                    ];

                    $smssentdata[] = [
                        'remarks' => $campaing,
                        'user_id' => Auth::guard('web')->user()->id,
                        'user_sender_id' => $clientsenderids->id,
                        'to_number' => $contact_number_n,
                        'sms_type' => $this->messagetype,
                        'sms_catagory' => $senderidtype,
                        'sms_content' => $request->message,
                        'number_of_sms' => $this->messagecount,
                        'total_contacts' => 1,
                        'send_type' => 'api',
                        'contact_group_id' => 0,
                        'status' => false,
                        'submitted_at' => Carbon::now(),
                    ];
                }

                if ($opt == "88018")
                {
                    $operator_contacts['robi'][] = [
                        'contact' => $contact_number_n,
                        'userid' => Auth::guard('web')->user()->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => $this->messagetype,
                        'sms_content' => $request->message,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        //'user_sent_sms_id' => $sent_sms->id
                    ];

                    $smssentdata[] = [
                        'remarks' => $campaing,
                        'user_id' => Auth::guard('web')->user()->id,
                        'user_sender_id' => $clientsenderids->id,
                        'to_number' => $contact_number_n,
                        'sms_type' => $this->messagetype,
                        'sms_catagory' => $senderidtype,
                        'sms_content' => $request->message,
                        'number_of_sms' => $this->messagecount,
                        'total_contacts' => 1,
                        'send_type' => 'api',
                        'contact_group_id' => 0,
                        'status' => false,
                        'submitted_at' => Carbon::now(),
                    ];
                }

                if ($opt == "88016")
                {
                    $operator_contacts['airtel'][] = [
                        'contact' => $contact_number_n,
                        'userid' => Auth::guard('web')->user()->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => $this->messagetype,
                        'sms_content' => $request->message,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        //'user_sent_sms_id' => $sent_sms->id
                    ];

                    $smssentdata[] = [
                        'remarks' => $campaing,
                        'user_id' => Auth::guard('web')->user()->id,
                        'user_sender_id' => $clientsenderids->id,
                        'to_number' => $contact_number_n,
                        'sms_type' => $this->messagetype,
                        'sms_catagory' => $senderidtype,
                        'sms_content' => $request->message,
                        'number_of_sms' => $this->messagecount,
                        'total_contacts' => 1,
                        'send_type' => 'api',
                        'contact_group_id' => 0,
                        'status' => false,
                        'submitted_at' => Carbon::now(),
                    ];
                }

                if ($opt == "88099")
                {
                    $operator_contacts['rankstel'][] = [
                        'contact' => $contact_number_n,
                        'userid' => Auth::guard('web')->user()->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => $this->messagetype,
                        'sms_content' => $request->message,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        //'user_sent_sms_id' => $sent_sms->id
                    ];

                    $smssentdata[] = [
                        'remarks' => $campaing,
                        'user_id' => Auth::guard('web')->user()->id,
                        'user_sender_id' => $clientsenderids->id,
                        'to_number' => $contact_number_n,
                        'sms_type' => $this->messagetype,
                        'sms_catagory' => $senderidtype,
                        'sms_content' => $request->message,
                        'number_of_sms' => $this->messagecount,
                        'total_contacts' => 1,
                        'send_type' => 'api',
                        'contact_group_id' => 0,
                        'status' => false,
                        'submitted_at' => Carbon::now(),
                    ];
                }
            }
        }     


        foreach (array_chunk($smssentdata,5000) as $t)  
        {
            $backupstage = DB::table("backups_stage")->get();

            if ($backupstage[0]->status) {
                DB::table('user_sent_smses_backup')->insert($t); 
            } else {
                DB::table('user_sent_smses')->insert($t); 
            }
        }

        if (! CheckRuntimeBalance::where('userid',Auth::guard('web')->user()->id)
                                    ->exists()
        ) {

            CheckRuntimeBalance::create([
                'userid' => Auth::guard('web')->user()->id,
                'ischecked' => false
            ]);
        }

        foreach(array_keys($operator_contacts) as $operator)
        {
            
            if ($clientsenderids->gateway_info == NULL)
            {   
                foreach($operator_contacts[$operator] as $opcontact)
                {
                    $data = [ 
                        "userid"        => $opcontact['userid'],
                        "campaing"  => $opcontact['remarks'],
                        "senderidtype" => $opcontact['sms_catagory'],
                        "user"		=> $gateways->user,                //$optUrlUser[$optID],               
                        "pass"		=> $gateways->password,                //$optUrlPass[$optID],  
                        "op"		=> "SMS", 
                        "mobile"	    => $opcontact['contact'],
                        "messagecount" => $opcontact['number_of_sms'],  
                        "cli"	  	    => $request->senderid,     
                        "charset"	=> $opcontact['sms_type'], 
                        "sms"		=> $opcontact['sms_content'],
                        'owner_id' => $opcontact['owner_id'],
                        'owner_type' => $opcontact['owner_type'],
                        'post_url' =>  'http://bulksms.teletalk.com.bd/link_sms_send.php?op=SMS',
                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                    ];

                    $this->smssend->smsSendToTelitalk($data);
                }
                
            } else {
            
                switch($operator)
                {
                    case 'teletalk':
                        //Teletalk
                        $gateway = collect($gateways)->where('sender_operator_name','Teletalk');

                        foreach($gateway as $gate)
                        {
                            $teletalkassociate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['teletalk'][0]['userid'],
                                    "campaing"      => $operator_contacts['teletalk'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['teletalk'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        str_replace('\"'," ",$teletalkassociate_sender_id),//'sender'   => $clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i< 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['teletalk'][0]['userid'],
                                    "campaing"      => $operator_contacts['teletalk'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['teletalk'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['teletalk'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['teletalk'][0]['userid'],
                                    "campaing"      => $operator_contacts['teletalk'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['teletalk'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['teletalk'][0]['userid'],
                                    "campaing"      => $operator_contacts['teletalk'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['teletalk'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi multi message
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                        break;
                    case 'gp':
                        //gp
                        $gateway = collect($gateways)->where('sender_operator_name','GP');
                        foreach($gateway as $gate)
                        {
                            $gpxassociate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        
                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gp'][0]['userid'],
                                    "campaing"      => $operator_contacts['gp'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gp'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gp'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gp'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        $i = 0;
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        $i = 0;
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gp'][0]['userid'],
                                    "campaing"      => $operator_contacts['gp'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gp'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gp'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gp'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['gp'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['gp'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['gp'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gp'][0]['userid'],
                                    "campaing"      => $operator_contacts['gp'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gp'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gp'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gp'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['gp'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gp'][0]['userid'],
                                    "campaing"      => $operator_contacts['gp'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gp'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gp'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gp'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['gp'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gp'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'gpx':
                        $gateway = collect($gateways)->where('sender_operator_name','GPx');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gpx'][0]['userid'],
                                    "campaing"      => $operator_contacts['gpx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gpx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gpx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gpx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gpx'][0]['userid'],
                                    "campaing"      => $operator_contacts['gpx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gpx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gpx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gpx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['gpx'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gpx'][0]['userid'],
                                    "campaing"      => $operator_contacts['gpx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gpx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gpx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gpx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gpx'][0]['userid'],
                                    "campaing"      => $operator_contacts['gpx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gpx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gpx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gpx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacgpxts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'blink':
                        $gateway = collect($gateways)->where('sender_operator_name','Banglalink');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blink'][0]['userid'],
                                    "campaing"      => $operator_contacts['blink'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blink'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blink'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blink'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'sender'   =>str_replace('\"'," ",$associate_sender_id),// $clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blink'][0]['userid'],
                                    "campaing"      => $operator_contacts['blink'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blink'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blink'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blink'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['blink'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blink'][0]['userid'],
                                    "campaing"      => $operator_contacts['blink'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blink'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blink'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blink'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blink'][0]['userid'],
                                    "campaing"      => $operator_contacts['blink'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blink'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blink'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blink'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacgpxts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'blx':
                        
                        $gateway = collect($gateways)->where('sender_operator_name','BLx');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,    
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blx'][0]['userid'],
                                    "campaing"      => $operator_contacts['blx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blx'][0]['userid'],
                                    "campaing"      => $operator_contacts['blx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['blx'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j= 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blx'][0]['userid'],
                                    "campaing"      => $operator_contacts['blx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blx'][0]['userid'],
                                    "campaing"      => $operator_contacts['blx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi multi message
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacgpxts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'robi':
                        
                        $gateway = collect($gateways)->where('sender_operator_name','Robi');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;

                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,    
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['robi'][0]['userid'],
                                    "campaing"      => $operator_contacts['robi'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['robi'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['robi'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['robi'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['robi'][0]['userid'],
                                    "campaing"      => $operator_contacts['robi'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['robi'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['robi'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['robi'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['robi'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['robi'][0]['userid'],
                                    "campaing"      => $operator_contacts['robi'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['robi'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['robi'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['robi'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['robi'][0]['userid'],
                                    "campaing"      => $operator_contacts['robi'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['robi'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['robi'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['robi'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi multi message
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacgpxts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'airtel':
                        
                        $gateway = collect($gateways)->where('sender_operator_name','Airtel');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['airtel'][0]['userid'],
                                    "campaing"      => $operator_contacts['airtel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['airtel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['airtel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['airtel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i  = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['airtel'][0]['userid'],
                                    "campaing"      => $operator_contacts['airtel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['airtel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['airtel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['airtel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['airtel'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['airtel'][0]['userid'],
                                    "campaing"      => $operator_contacts['airtel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['airtel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['airtel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['airtel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['airtel'][0]['userid'],
                                    "campaing"      => $operator_contacts['airtel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['airtel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['airtel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['airtel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi multi message
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacgpxts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'rankstel':
                        
                        $gateway = collect($gateways)->where('sender_operator_name','RanksTell');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['rankstel'][0]['userid'],
                                    "campaing"      => $operator_contacts['rankstel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['rankstel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i  = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['rankstel'][0]['userid'],
                                    "campaing"      => $operator_contacts['rankstel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['rankstel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['rankstel'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['rankstel'][0]['userid'],
                                    "campaing"      => $operator_contacts['rankstel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['rankstel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['rankstel'][0]['userid'],
                                    "campaing"      => $operator_contacts['rankstel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['rankstel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi multi message
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacgpxts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    default:
                    break;
                }
            }

            
        }
        
        
        $clientmasksmsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'mask');
        $clientnonmasksmsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'nomask');
        $clientvoicemsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'voice');

        $totalmaskbal_1 = ($clientmasksmsbal_1-$this->consumesms->totalConsumeMaskBalance($clientid->id));
        $totalnonmaskbal_1 = ($clientnonmasksmsbal_1-$this->consumesms->totalConsumeNonMaskBalance($clientid->id));
        $totalvoicebal_1 = ($clientvoicemsbal_1-$this->consumesms->totalConsumeVoiceBalance($clientid->id));

        $camid = substr($campaing,9, strlen($campaing));
        $drldate = \Carbon\Carbon::now();
        if ($totalmaskbal_1 <= $totalmaskbal || $totalnonmaskbal_1 <= $totalnonmaskbal || $totalvoicebal_1<= $totalvoicebal)
        {
            if ($senderidtype == 'mask')
            {
                if (session()->has('sendsuccess'))
                {
                    //$this->fastRequest('https://monty.fedsms.com/push-monty-dlr');
                    if(session()->has('errorflug')) {
                        Log::channel('smslog')->info('1st response: '."{msg:". session()->get('sendsuccess').","."mask:".$totalmaskbal_1.","."camid:".$camid."}". date('y-m-d h:i:s'));
                        
                        echo json_encode(['msg' => session()->get('sendsuccess'),'mask' => $totalmaskbal_1,'camid' => $camid]);
                        //return response()->json(['msg' => session()->get('sendsuccess'),'nonmask' => $totalnonmaskbal_1,'camid' => $camid],200);
                        dispatch(new DlrPUshJob([
                            'multisms' => session()->get('multisms'),
                            'errorflug' => session()->get('errorflug'),
                            'sender' => session()->get('sender'),
                            'destination' => session()->get('destination'),
                            'messageId' => session()->get('messageId')
                        ]))->delay(now()->addSeconds(10));


                        dispatch(new DlrPUshSecondJob([
                            'multisms' => session()->get('multisms'),
                            'errorflug' => session()->get('errorflug'),
                            'sender' => session()->get('sender'),
                            'destination' => session()->get('destination'),
                            'messageId' => session()->get('messageId')
                        ]))->delay(now()->addSeconds(14));

                        return;
                    }
                    return response()->json(['msg' => session()->get('sendsuccess'),'nonmask' => $totalmaskbal_1,'camid' => $camid],200);
                }

                if (session()->has('senderr'))
                {
                    //$this->fastRequest('https://monty.fedsms.com/push-monty-dlr');
                    //return response()->json(['errmsg' => session()->get('senderr')],406);
                    if(session()->has('errorflug')) {
                        Log::channel('smslog')->info('1st response: '."{errmsg:". session()->get('senderr')."}". date('y-m-d h:i:s'));
                        
                        echo json_encode(['errmsg' => session()->get('senderr')]);
                        //return response()->json(['msg' => session()->get('sendsuccess'),'nonmask' => $totalnonmaskbal_1,'camid' => $camid],200);
                        dispatch(new DlrPUshJob([
                            'multisms' => session()->get('multisms'),
                            'errorflug' => session()->get('errorflug'),
                            'sender' => session()->get('sender'),
                            'destination' => session()->get('destination'),
                            'messageId' => session()->get('messageId')
                        ]))->delay(now()->addSeconds(10));

                        dispatch(new DlrPUshSecondJob([
                            'multisms' => session()->get('multisms'),
                            'errorflug' => session()->get('errorflug'),
                            'sender' => session()->get('sender'),
                            'destination' => session()->get('destination'),
                            'messageId' => session()->get('messageId')
                        ]))->delay(now()->addSeconds(14));

                        return;
                    }
                    return response()->json(['errmsg' => session()->get('senderr')],406);
                }

                return response()->json(['errmsg' => session()->get('senderr')],406);
                //return response()->json(['msg' => 'SMS succesfully sent','mask' => $totalmaskbal_1],200);
            } else if ($senderidtype == 'nomask') {
                if (session()->has('sendsuccess'))
                {
                    //$this->fastRequest('https://monty.fedsms.com/push-monty-dlr');
                    if(session()->has('errorflug')) {
                        Log::channel('smslog')->info('1st response: '."{msg:". session()->get('sendsuccess').","."nonmask:".$totalnonmaskbal_1.","."camid:".$camid."}". date('y-m-d h:i:s'));
                        
                        echo json_encode(['msg' => session()->get('sendsuccess'),'nonmask' => $totalnonmaskbal_1,'camid' => $camid]);
                        //return response()->json(['msg' => session()->get('sendsuccess'),'nonmask' => $totalnonmaskbal_1,'camid' => $camid],200);
                        dispatch(new DlrPUshJob([
                            'multisms' => session()->get('multisms'),
                            'errorflug' => session()->get('errorflug'),
                            'sender' => session()->get('sender'),
                            'destination' => session()->get('destination'),
                            'messageId' => session()->get('messageId')
                        ]))->delay(Carbon::now()->addSeconds(10));


                        dispatch(new DlrPUshSecondJob([
                            'multisms' => session()->get('multisms'),
                            'errorflug' => session()->get('errorflug'),
                            'sender' => session()->get('sender'),
                            'destination' => session()->get('destination'),
                            'messageId' => session()->get('messageId')
                        ]))->delay(now()->addSeconds(14));

                        return;
                    }
                    return response()->json(['msg' => session()->get('sendsuccess'),'nonmask' => $totalnonmaskbal_1,'camid' => $camid],200);
                }

                if (session()->has('senderr'))
                {
                    //$this->fastRequest('https://monty.fedsms.com/push-monty-dlr');
                    //return response()->json(['errmsg' => session()->get('senderr')],406);
                    if(session()->has('errorflug')) {
                        Log::channel('smslog')->info('1st response: '."{errmsg:". session()->get('senderr')."}". date('y-m-d h:i:s'));
                        
                        echo json_encode(['errmsg' => session()->get('senderr')]);
                        //return response()->json(['msg' => session()->get('sendsuccess'),'nonmask' => $totalnonmaskbal_1,'camid' => $camid],200);
                        dispatch(new DlrPUshJob([
                            'multisms' => session()->get('multisms'),
                            'errorflug' => session()->get('errorflug'),
                            'sender' => session()->get('sender'),
                            'destination' => session()->get('destination'),
                            'messageId' => session()->get('messageId')
                        ]))->delay(Carbon::now()->addSeconds(10));


                        dispatch(new DlrPUshSecondJob([
                            'multisms' => session()->get('multisms'),
                            'errorflug' => session()->get('errorflug'),
                            'sender' => session()->get('sender'),
                            'destination' => session()->get('destination'),
                            'messageId' => session()->get('messageId')
                        ]))->delay(now()->addSeconds(14));

                        return;
                    }
                    return response()->json(['errmsg' => session()->get('senderr')],406);
                }
                //return response()->json(['msg' => 'SMS succesfully sent','nomask' => $totalnonmaskbal_1],200);

                return response()->json(['errmsg' => session()->get('senderr')],406);
            } else if ($senderidtype == 'voice') {
                if (session()->has('sendsuccess'))
                {
                    return response()->json(['msg' => session()->get('sendsuccess'),'voicemask' => $totalvoicebal_1,'camid' => $camid],200);
                }

                if (session()->has('senderr'))
                {
                    return response()->json(['errmsg' => session()->get('senderr')],406);
                }
                //return response()->json(['msg' => 'SMS succesfully sent','voice' => $totalvoicebal_1],200);
            } else {
                return 0;
            }
        } else {
            if (session()->has('sendsuccess'))
            {
                return response()->json(['msg' => session()->get('sendsuccess'),'mask' => $totalmaskbal_1,'camid' => $camid],200);
            }

            if (session()->has('senderr'))
            {
                return response()->json(['errmsg' => session()->get('senderr')],406);
            }
            //return response()->json(['errmsg' => 'There is an error, with the senderid, please contact with vendor'],406);
        }
    }

    public function manageSmsMessage(Request $request)
    {
        Auth::guard('web')->login($request->user());

        if (Auth::guard('web')->user()->status == 'n') {
            return response()->json(['errmsg' => 'We have found unethical transection from your account, your account is blocked until the issue is solve.'], 406);
        }
        
        $campaing = !empty($request->cam_name) ? $request->cam_name."-".Auth::guard('web')->user()->id : 'campaing-'.Auth::guard('web')->user()->id.date("d").time();
        
        $clientsenderids = $this->smssend->getSenderIdInformationBySenderName($request->senderid);
        
        if (! $clientsenderids instanceof SmsSenderIdResource)
        {
            return response()->json(['errmsg' => $clientsenderids->getData()->errmsg], 406);
        }

        $gateways = json_decode($clientsenderids->gateway_info);

        if (empty($gateways))
        {
            $gateways = $clientsenderids;
        }


        $contacts = [];

        $this->messagecount = $this->smssend->manageSmsMessageCount($request->message);

        $this->messagetype = $this->smssend->smsMessageType($request->message);

        $senderidtype = $this->smssend->getSenderIdType(['senderid' => $request->senderid]);

        $clientid = Auth::guard('web')->user();

        $clientmasksmsbal = $this->product->getSmsBalanceByCategory($clientid->id,'mask');
        $clientnonmasksmsbal = $this->product->getSmsBalanceByCategory($clientid->id,'nomask');
        $clientvoicemsbal = $this->product->getSmsBalanceByCategory($clientid->id,'voice');

        $totalmaskbal = ($clientmasksmsbal-$this->consumesms->totalConsumeMaskBalance($clientid->id));
        $totalnonmaskbal = ($clientnonmasksmsbal-$this->consumesms->totalConsumeNonMaskBalance($clientid->id));
        $totalvoicebal = ($clientvoicemsbal-$this->consumesms->totalConsumeVoiceBalance($clientid->id));


        $root_userid = Auth::guard('web')->user()->root_user_id;

        $reseller_id = Auth::guard('web')->user()->reseller_id;

        

        //Single contact number start
        if ($request->numbertype == 'group')
        {
            $contacts =  explode(",",str_replace("\n",",",str_replace(" ",",",$request->contact_number)));

            $totalSms = ($this->messagecount*count($contacts));

            if ($totalmaskbal < $totalSms && $senderidtype == 'mask')
            {
                return response()->json(['errmsg' => "Insufficient mask sms balance"], 406);
            }

            if ($totalnonmaskbal < $totalSms && $senderidtype == 'nomask')
            {
                return response()->json(['errmsg' => "Insufficient nonmask sms balance"], 406);
            }

            if ($totalvoicebal < $totalSms && $senderidtype == 'voice')
            {
                return response()->json(['errmsg' => "Insufficient voice sms balance"], 406);
            }

        } else {
            $contacts =  explode(",",str_replace("\n",",",str_replace(" ",",",$request->contact_number)));//$request->numbertype == 'contgroup' ? $this->validMobile($request) : $this->validMobileFromFile($request);

            $this->validMobileInRequest($request);
            
            $totalValidContact = $this->totalValidContact;

            $totalSms = ($totalValidContact*$this->messagecount);

            if ($totalmaskbal < $totalSms && $senderidtype == 'mask')
            {
                return response()->json(['errmsg' => "Insufficient mask sms balance"], 406);
            }

            if ($totalnonmaskbal < $totalSms && $senderidtype == 'nomask')
            {
                return response()->json(['errmsg' => "Insufficient nonmask sms balance"], 406);
            }

            if ($totalvoicebal < $totalSms && $senderidtype == 'voice')
            {
                return response()->json(['errmsg' => "Insufficient voice sms balance"], 406);
            }
        }
        
        $smssentdata = [];

        $operator_contacts = [];

        foreach(array_unique($contacts) as $contact_number)
        {
            
            $validprefix =  ["88017","88014","88013","88015","88018","88016","88019"];

            $checkcontact = Str::substr($contact_number,0,2);
            $checkcontactwithplus = Str::substr($contact_number,0,3);

            //Covert number in format like 01716xxxxxx if start with 88
            $contact_number_n = '';
            $opt = '';
            if ($checkcontact == 88 || $checkcontactwithplus == '+88')
            {
                $contact_number_n = $checkcontact == 88 ? Str::substr($contact_number,0,13) : Str::substr($contact_number,1,13); 
                $opt = Str::substr($contact_number_n,0,5);
            } else {
                $contact_number_n = $contact_number;
                $opt = '88'.Str::substr($contact_number_n,0,3);
            }

            $dippingarr = $contact_number_n;
            $contact_length = Str::length($contact_number_n);

            if (Auth::guard('web')->user()->live_dipping == true) {
                    $dippingoperator = ["Grameenphone","Banglalink","Airtel","Robi","TeleTalk"];

                    $client = new Client([
                        'verify' => false
                    ]);
            
                    $clientresponse = $client->request('GET','http://api.lexiconbd.net/lexiconbdmnp.aspx',[
                        'query' => [ 
                            'apikey' => 'b0652a5086fbe9c03039c7d341c9e73a12863165',
                            'number' => $dippingarr,
                        ]
                    ]);
            
                    $responsedata =  json_decode($clientresponse->getBody());

                    $rescollect = collect($responsedata);
                    //return $rescollect['data'][0]->operator;

                    DB::table("lexicon_dipping_logs")->insert([
                        'code' => $rescollect['data'][0]->code,
                        'mobile' => $rescollect['data'][0]->mobile,
                        'prefix' => $rescollect['data'][0]->prefix,
                        'operator' => $rescollect['data'][0]->operator,
                        'status' => $rescollect['data'][0]->status,
                        'created_at' => Carbon::now(),
                        'updated_at' => Carbon::now()
                    ]);

                    $shortoperator = '';

                    if (in_array(trim($rescollect['data'][0]->operator), $dippingoperator)) {
                        
                        if (trim($rescollect['data'][0]->operator) == "Grameenphone") {
                            if ($rescollect['data'][0]->prefix == "88017") {
                                $shortoperator = 'gp';
                            }

                            if ($rescollect['data'][0]->prefix == "88013") {
                                $shortoperator = 'gpx';
                            }
                        }

                        if (trim($rescollect['data'][0]->operator) == "Banglalink") {
                            if ($rescollect['data'][0]->prefix == "88019") {
                                $shortoperator = 'blink';
                            }

                            if ($rescollect['data'][0]->prefix == "88014") {
                                $shortoperator = 'blx';
                            }
                        }

                        if (trim($rescollect['data'][0]->operator) == "Airtel") {
                            $shortoperator = 'airtel';
                        }

                        if (trim($rescollect['data'][0]->operator) == "Robi") {
                            $shortoperator = 'robi';
                        }

                        if (trim($rescollect['data'][0]->operator) == "TeleTalk") {
                            $shortoperator = 'teletalk';
                        }

                        $operator_contacts[$shortoperator][] = [
                            'contact' => ($shortoperator == 'gp' || $shortoperator == 'gpx') && $contact_length == 13 ? Str::substr($contact_number_n,2,$contact_length) : $contact_number_n,
                            'userid' => Auth::guard('web')->user()->id,
                            'remarks' => $campaing,
                            'number_of_sms' => $this->messagecount,
                            'sms_catagory' => $senderidtype,
                            'sms_type' => $this->messagetype,
                            'sms_content' => $request->message,
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            //'user_sent_sms_id' => $sent_sms->id
                        ];

                        $smssentdata[] = [
                            'remarks' => $campaing,
                            'user_id' => Auth::guard('web')->user()->id,
                            'user_sender_id' => $clientsenderids->id,
                            'to_number' => ($shortoperator == 'gp' || $shortoperator == 'gpx') && $contact_length == 13 ? Str::substr($contact_number_n,2,$contact_length) : $contact_number_n,//$contact_number_n,
                            'sms_type' => $this->messagetype,
                            'sms_catagory' => $senderidtype,
                            'sms_content' => $request->message,
                            'number_of_sms' => $this->messagecount,
                            'total_contacts' => 1,
                            'send_type' => 'api',
                            'contact_group_id' => 0,
                            'status' => false,
                            'submitted_at' => Carbon::now(),
                        ];

                    }
            } else {
                            
                    if (in_array($opt, $validprefix))
                    {
                        if ($opt == "88017") {
                            $shortoperator = 'gp';
                        }

                        if ($opt == "88013") {
                            $shortoperator = 'gpx';
                        }

                        if ($opt == "88019") {
                            $shortoperator = 'blink';
                        }

                        if ($opt == "88014") {
                            $shortoperator = 'blx';
                        }

                        if ($opt == "88015") {
                            $shortoperator = 'teletalk';
                        }

                        if ($opt == "88018") {
                            $shortoperator = 'robi';
                        }

                        if ($opt == "88016") {
                            $shortoperator = 'airtel';
                        }

                        if ($opt == "88099") {
                            $shortoperator = 'rankstel';
                        }


                        $operator_contacts[$shortoperator][] = [
                            'contact' => $shortoperator == ('gp' || $shortoperator == 'gpx') && $contact_length == 13 ? Str::substr($contact_number_n,2,$contact_length) : $contact_number_n,
                            'userid' => Auth::guard('web')->user()->id,
                            'remarks' => $campaing,
                            'number_of_sms' => $this->messagecount,
                            'sms_catagory' => $senderidtype,
                            'sms_type' => $this->messagetype,
                            'sms_content' => $request->message,
                            'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                            'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                            //'user_sent_sms_id' => $sent_sms->id
                        ];

                        $smssentdata[] = [
                            'remarks' => $campaing,
                            'user_id' => Auth::guard('web')->user()->id,
                            'user_sender_id' => $clientsenderids->id,
                            'to_number' => ($shortoperator == 'gp' || $shortoperator == 'gpx') && $contact_length == 13 ? Str::substr($contact_number_n,2,$contact_length) : $contact_number_n,//$contact_number_n,
                            'sms_type' => $this->messagetype,
                            'sms_catagory' => $senderidtype,
                            'sms_content' => $request->message,
                            'number_of_sms' => $this->messagecount,
                            'total_contacts' => 1,
                            'send_type' => 'api',
                            'contact_group_id' => 0,
                            'status' => false,
                            'submitted_at' => Carbon::now(),
                        ];
                    }

            }
        }     


        foreach (array_chunk($smssentdata,5000) as $t)  
        {
            $backupstage = DB::table("backups_stage")->get();

            if ($backupstage[0]->status) {
                DB::table('user_sent_smses_backup')->insert($t); 
            } else {
                DB::table('user_sent_smses')->insert($t); 
            }
        }

        if (! CheckRuntimeBalance::where('userid',Auth::guard('web')->user()->id)->exists()) {

            CheckRuntimeBalance::create([
                'userid' => Auth::guard('web')->user()->id,
                'ischecked' => false
            ]);
        }

        foreach(array_keys($operator_contacts) as $operator)
        {
            
            if ($clientsenderids->gateway_info == NULL)
            {   
                foreach($operator_contacts[$operator] as $opcontact)
                {
                    $data = [ 
                        "userid"        => $opcontact['userid'],
                        "campaing"  => $opcontact['remarks'],
                        "senderidtype" => $opcontact['sms_catagory'],
                        "user"		=> $gateways->user,                //$optUrlUser[$optID],               
                        "pass"		=> $gateways->password,                //$optUrlPass[$optID],  
                        "op"		=> "SMS", 
                        "mobile"	    => $opcontact['contact'],
                        "messagecount" => $opcontact['number_of_sms'],  
                        "cli"	  	    => $request->senderid,     
                        "charset"	=> $opcontact['sms_type'], 
                        "sms"		=> $opcontact['sms_content'],
                        'owner_id' => $opcontact['owner_id'],
                        'owner_type' => $opcontact['owner_type'],
                        'post_url' =>  'http://bulksms.teletalk.com.bd/link_sms_send.php?op=SMS',
                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                    ];

                    $this->smssend->smsSendToTelitalk($data);
                }
                
            } else {
            
                switch($operator)
                {
                    case 'teletalk':
                        //Teletalk
                        $gateway = collect($gateways)->where('sender_operator_name','Teletalk');

                        foreach($gateway as $gate)
                        {
                            $teletalkassociate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                    
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                    
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    "messagetype"	=> $opcontact['sms_type'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            foreach($operator_contacts[$operator] as $opcontact)
                            {

                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi multi message
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        }
                        break;
                    case 'gp':
                        //gp
                        $gateway = collect($gateways)->where('sender_operator_name','GP');
                        foreach($gateway as $gate)
                        {
                            $gpxassociate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        
                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            foreach($operator_contacts[$operator] as $opcontact)
                            {

                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    "messagetype"	=> $opcontact['sms_type'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'gpx':
                        $gateway = collect($gateways)->where('sender_operator_name','GPx');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    "messagetype"	=> $opcontact['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'blink':
                        $gateway = collect($gateways)->where('sender_operator_name','Banglalink');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        
                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    "messagetype"	=> $opcontact['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        }
                        
                    break;
                    case 'blx':
                        
                        $gateway = collect($gateways)->where('sender_operator_name','BLx');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        
                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    "messagetype"	=> $opcontact['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        }
                        
                    break;
                    case 'robi':
                        
                        $gateway = collect($gateways)->where('sender_operator_name','Robi');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;

                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        
                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    "messagetype"	=> $opcontact['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        }
                        
                    break;
                    case 'airtel':
                        
                        $gateway = collect($gateways)->where('sender_operator_name','Airtel');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        
                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    "messagetype"	=> $opcontact['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'rankstel':
                        
                        $gateway = collect($gateways)->where('sender_operator_name','RanksTell');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        
                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    "messagetype"	=> $opcontact['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"      => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $opcontact['sms_type'], 
                                    "message"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                                
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [
                                    'userid'   => $opcontact['userid'],
                                    'campaing' => $opcontact['remarks'],
                                    'senderidtype' => $opcontact['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => $opcontact['contact'],
                                    'messagecount' => $opcontact['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            }
                            //return $data;
                        }
                    break;
                    default:
                    break;
                }
            }

            
        }
        
        
        $clientmasksmsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'mask');
        $clientnonmasksmsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'nomask');
        $clientvoicemsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'voice');

        $totalmaskbal_1 = ($clientmasksmsbal_1-$this->consumesms->totalConsumeMaskBalance($clientid->id));
        $totalnonmaskbal_1 = ($clientnonmasksmsbal_1-$this->consumesms->totalConsumeNonMaskBalance($clientid->id));
        $totalvoicebal_1 = ($clientvoicemsbal_1-$this->consumesms->totalConsumeVoiceBalance($clientid->id));

        $camid = substr($campaing,9, strlen($campaing));
        $drldate = \Carbon\Carbon::now();
        if ($totalmaskbal_1 <= $totalmaskbal || $totalnonmaskbal_1 <= $totalnonmaskbal || $totalvoicebal_1<= $totalvoicebal)
        {
            if ($senderidtype == 'mask')
            {
                if (session()->has('sendsuccess'))
                {
                   
                    return response()->json(['msg' => session()->get('sendsuccess'),'mask' => $totalmaskbal_1,'camid' => $camid],200);
                }

                if (session()->has('senderr'))
                {
                    
                    return response()->json(['errmsg' => session()->get('senderr')],406);
                }

                return response()->json(['errmsg' => session()->get('senderr')],406);
                //return response()->json(['msg' => 'SMS succesfully sent','mask' => $totalmaskbal_1],200);
            } else if ($senderidtype == 'nomask') {
                if (session()->has('sendsuccess'))
                {
                    
                    return response()->json(['msg' => session()->get('sendsuccess'),'nonmask' => $totalnonmaskbal_1,'camid' => $camid],200);
                }

                if (session()->has('senderr'))
                {
                    
                    return response()->json(['errmsg' => session()->get('senderr')],406);
                }
                //return response()->json(['msg' => 'SMS succesfully sent','nomask' => $totalnonmaskbal_1],200);

                return response()->json(['errmsg' => session()->get('senderr')],406);
            } else if ($senderidtype == 'voice') {
                if (session()->has('sendsuccess'))
                {
                    return response()->json(['msg' => session()->get('sendsuccess'),'voicemask' => $totalvoicebal_1,'camid' => $camid],200);
                }

                if (session()->has('senderr'))
                {
                    return response()->json(['errmsg' => session()->get('senderr')],406);
                }
                //return response()->json(['msg' => 'SMS succesfully sent','voice' => $totalvoicebal_1],200);
            } else {
                return 0;
            }
        } else {
            if (session()->has('sendsuccess'))
            {
                return response()->json(['msg' => session()->get('sendsuccess'),'mask' => $totalmaskbal_1,'camid' => $camid],200);
            }

            if (session()->has('senderr'))
            {
                return response()->json(['errmsg' => session()->get('senderr')],406);
            }
            //return response()->json(['errmsg' => 'There is an error, with the senderid, please contact with vendor'],406);
        }
    }


    public function rootClientPhonVerifiedSmsSend(Request $request,$user,$phone)
    {
        $clientid = \App\User::with('senderid')->where('id',33)->first();
        
        $usersenders = \App\SmsSender::where('id',$clientid->senderid->sms_sender_id)->first();
        
        $campaing = !empty($request->cam_name) ? $request->cam_name."-".'33' : 'campaing-'.date("d").time();

        $operator_contacts = [];

        $clientsenderids = $this->smssend->getSenderIdInformationBySenderName($usersenders->sender_name);

        $gateways = json_decode($clientsenderids->gateway_info);

        if (empty($gateways))
        {
            $gateways = $clientsenderids;
        }


        $contacts = [];
        
        $requestfor = $request->requestfor;
        $passwordresetfor = $request->passwordresetfor;

        if(User::where('id', $user)->exists() && empty($requestfor) && empty($passwordresetfor)) {

            $verifingClient = User::findOrFail($user);//where('phone', $request->phone)->where('email',$request->email)->where('phone_verified',false)->first();
            
        }

        if(User::where('id', $user)->exists() &&  $requestfor == "passwordreset" && $passwordresetfor == 'user') {

            $verifingClient = User::findOrFail($user);//where('phone', $request->phone)->where('email',$request->email)->where('phone_verified',false)->first();
           
        }

        if(Reseller::where('id', $user)->exists() &&  $requestfor == "passwordreset" && $passwordresetfor == 'reseller') {
            $verifingClient = Reseller::findOrFail($user);//where('phone', $request->phone)->where('email',$request->email)->where('phone_verified',false)->first();
            
        }

        if(RootUser::where('id', $user)->exists() &&  $requestfor == "passwordreset" && $passwordresetfor == 'root') {
            $verifingClient = RootUser::findOrFail($user);//where('phone', $request->phone)->where('email',$request->email)->where('phone_verified',false)->first();
            
        }


        $this->messagecount = $this->smssend->manageSmsMessageCount($verifingClient->security_code);

        $this->messagetype = $this->smssend->smsMessageType($verifingClient->security_code);

        $senderidtype = $this->smssend->getSenderIdType(['senderid' => $usersenders->sender_name]);

        $clientid = \App\User::findOrFail(33);

        $clientmasksmsbal = $this->product->getSmsBalanceByCategory($clientid->id,'mask');
        $clientnonmasksmsbal = $this->product->getSmsBalanceByCategory($clientid->id,'nomask');
        $clientvoicemsbal = $this->product->getSmsBalanceByCategory($clientid->id,'voice');

        $totalmaskbal = ($clientmasksmsbal-$this->consumesms->totalConsumeMaskBalance($clientid->id));
        $totalnonmaskbal = ($clientnonmasksmsbal-$this->consumesms->totalConsumeNonMaskBalance($clientid->id));
        $totalvoicebal = ($clientvoicemsbal-$this->consumesms->totalConsumeVoiceBalance($clientid->id));


        $root_userid = $clientid->root_user_id;

        $reseller_id = $clientid->reseller_id;

        $contacts[] = $phone;

        if (count($contacts) > 1) {
            return redirect(route('user-registration'))->with('errmsg','More than one contact not allowed');
        }

        $totalSms = $this->messagecount;

        
        if ($totalmaskbal < $totalSms && $senderidtype == 'mask')
        {
            return redirect(route('user-registration'))->with('errmsg',"Insufficient mask sms balance");
        }

        if ($totalnonmaskbal < $totalSms && $senderidtype == 'nomask')
        {
            return redirect(route('user-registration'))->with('errmsg',"Insufficient nonmask sms balance");
        }

        if ($totalvoicebal < $totalSms && $senderidtype == 'voice')
        {
            return redirect(route('user-registration'))->with('errmsg',"Insufficient voice sms balance");
        }

        foreach(array_unique($contacts) as $contact_number)
        {
            
            $validprefix =  ["88017","88014","88013","88015","88018","88016","88019"];

            $checkcontact = Str::substr($contact_number,0,2);
            $checkcontactwithplus = Str::substr($contact_number,0,3);

            //Covert number in format like 01716xxxxxx if start with 88
            $contact_number_n = '';
            if ($checkcontact == 88 || $checkcontactwithplus == '+88')
            {
                $contact_number_n = $checkcontact == 88 ? Str::substr($contact_number,2,13) : Str::substr($contact_number,3,13); 
            } else {
                $contact_number_n = $contact_number;
            }

            $backupstage = DB::table("backups_stage")->get();

            if ($backupstage[0]->status) {
                $sent_sms = new UserSentSmsResource(UserSentSmsBackup::create([
                    'remarks' => $campaing,
                    'user_id' => $clientid->id,
                    'user_sender_id' => $clientsenderids->id,
                    'to_number' => $contact_number_n,
                    'sms_type' => 'text',
                    'sms_catagory' => $senderidtype,
                    'sms_content' => $verifingClient->security_code,
                    'number_of_sms' => $this->messagecount,
                    'total_contacts' => 1,
                    'send_type' => 'smsadmin',
                    'contact_group_id' => 0,
                    'status' => false,
                    'submitted_at' => Carbon::now(),
                ])); 
            } else {
                $sent_sms = new UserSentSmsResource(UserSentSms::create([
                    'remarks' => $campaing,
                    'user_id' => $clientid->id,
                    'user_sender_id' => $clientsenderids->id,
                    'to_number' => $contact_number_n,
                    'sms_type' => 'text',
                    'sms_catagory' => $senderidtype,
                    'sms_content' => $verifingClient->security_code,
                    'number_of_sms' => $this->messagecount,
                    'total_contacts' => 1,
                    'send_type' => 'smsadmin',
                    'contact_group_id' => 0,
                    'status' => false,
                    'submitted_at' => Carbon::now(),
                ]));
            }


            $opt = '88'.Str::substr($contact_number_n,0,3);  
                    
            if (in_array($opt, $validprefix))
            {
                if ($opt == "88017")
                {
                    $operator_contacts['gp'][] = [
                        'contact' => $contact_number_n,
                        'userid' => $clientid->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => 'text',
                        'sms_content' => $verifingClient->security_code,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        'user_sent_sms_id' => $sent_sms->id
                    ];
                }

                if ($opt == "88013")
                {
                    $operator_contacts['gpx'][] = [
                        'contact' => $contact_number_n,
                        'userid' => $clientid->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => 'text',
                        'sms_content' => $verifingClient->security_code,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        'user_sent_sms_id' => $sent_sms->id
                    ];
                }

                if ($opt == "88019")
                {
                    $operator_contacts['blink'][] = [
                        'contact' => $contact_number_n,
                        'userid' => $clientid->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => 'text',
                        'sms_content' => $verifingClient->security_code,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        'user_sent_sms_id' => $sent_sms->id
                    ];
                }

                if ($opt == "88014")
                {
                    $operator_contacts['blx'][] = [
                        'contact' => $contact_number_n,
                        'userid' => $clientid->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => 'text',
                        'sms_content' => $verifingClient->security_code,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        'user_sent_sms_id' => $sent_sms->id
                    ];
                }

                if ($opt == "88015")
                {
                    $operator_contacts['teletalk'][] = [
                        'contact' => $contact_number_n,
                        'userid' => $clientid->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => 'text',
                        'sms_content' => $verifingClient->security_code,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        'user_sent_sms_id' => $sent_sms->id
                    ];
                }

                if ($opt == "88018")
                {
                    $operator_contacts['robi'][] = [
                        'contact' => $contact_number_n,
                        'userid' => $clientid->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => 'text',
                        'sms_content' => $verifingClient->security_code,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        'user_sent_sms_id' => $sent_sms->id
                    ];
                }

                if ($opt == "88016")
                {
                    $operator_contacts['airtel'][] = [
                        'contact' => $contact_number_n,
                        'userid' => $clientid->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => 'text',
                        'sms_content' => $verifingClient->security_code,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        'user_sent_sms_id' => $sent_sms->id
                    ];
                }

                if ($opt == "88099")
                {
                    $operator_contacts['rankstel'][] = [
                        'contact' => $contact_number_n,
                        'userid' => $clientid->id,
                        'remarks' => $campaing,
                        'number_of_sms' => $this->messagecount,
                        'sms_catagory' => $senderidtype,
                        'sms_type' => 'text',
                        'sms_content' => $verifingClient->security_code,
                        'owner_id' => $reseller_id > 0 ? $reseller_id : $root_userid,
                        'owner_type' => $reseller_id > 0 ? 'reseller' : 'root',
                        'user_sent_sms_id' => $sent_sms->id
                    ];
                }
            }
        }

        foreach(array_keys($operator_contacts) as $operator)
        {
            
            if ($clientsenderids->gateway_info == NULL)
            {   
                foreach($operator_contacts[$operator] as $opcontact)
                {
                    $data = [ 
                        "userid"        => $opcontact['userid'],
                        "campaing"  => $opcontact['remarks'],
                        "senderidtype" => $opcontact['sms_catagory'],
                        "user"		=> $gateways->user,                //$optUrlUser[$optID],               
                        "pass"		=> $gateways->password,                //$optUrlPass[$optID],  
                        "op"		=> "SMS", 
                        "mobile"	    => $opcontact['contact'],
                        "messagecount" => $opcontact['number_of_sms'],  
                        "cli"	  	    => $request->senderid,     
                        "charset"	=> $opcontact['sms_type'], 
                        "sms"		=> $opcontact['sms_content'],
                        'owner_id' => $opcontact['owner_id'],
                        'owner_type' => $opcontact['owner_type'],
                        'post_url' =>  'http://bulksms.teletalk.com.bd/link_sms_send.php?op=SMS',
                        'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                    ];

                    $this->smssend->smsSendToTelitalk($data);
                }
                
            } else {
            
                switch($operator)
                {
                    case 'teletalk':
                        //Teletalk
                        $gateway = collect($gateways)->where('sender_operator_name','Teletalk');

                        foreach($gateway as $gate)
                        {
                            $teletalkassociate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['teletalk'][0]['userid'],
                                    "campaing"      => $operator_contacts['teletalk'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['teletalk'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        str_replace('\"'," ",$teletalkassociate_sender_id),//'sender'   => $clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i< 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['teletalk'][0]['userid'],
                                    "campaing"      => $operator_contacts['teletalk'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['teletalk'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['teletalk'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['teletalk'][0]['userid'],
                                    "campaing"      => $operator_contacts['teletalk'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['teletalk'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['teletalk'][0]['userid'],
                                    "campaing"      => $operator_contacts['teletalk'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['teletalk'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi multi message
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['teletalk'][0]['userid'],
                                    'campaing' => $operator_contacts['teletalk'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['teletalk'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['teletalk'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['teletalk'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['teletalk'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['teletalk'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$teletalkassociate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                        break;
                    case 'gp':
                        //gp
                        $gateway = collect($gateways)->where('sender_operator_name','GP');
                        foreach($gateway as $gate)
                        {
                            $gpxassociate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        
                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gp'][0]['userid'],
                                    "campaing"      => $operator_contacts['gp'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gp'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gp'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gp'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        $i = 0;
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        $i = 0;
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gp'][0]['userid'],
                                    "campaing"      => $operator_contacts['gp'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gp'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gp'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gp'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['gp'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['gp'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['gp'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gp'][0]['userid'],
                                    "campaing"      => $operator_contacts['gp'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gp'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gp'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gp'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    
                                    //'user_sent_sms_id' => $operator_contacts['gp'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gp'][0]['userid'],
                                    "campaing"      => $operator_contacts['gp'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gp'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gp'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gp'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['gp'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gp'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gp'][0]['userid'],
                                    'campaing' => $operator_contacts['gp'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gp'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gp'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['gp'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gp'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gp'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$gpxassociate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'gpx':
                        $gateway = collect($gateways)->where('sender_operator_name','GPx');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gpx'][0]['userid'],
                                    "campaing"      => $operator_contacts['gpx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gpx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gpx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gpx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gpx'][0]['userid'],
                                    "campaing"      => $operator_contacts['gpx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gpx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gpx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gpx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['gpx'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gpx'][0]['userid'],
                                    "campaing"      => $operator_contacts['gpx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gpx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gpx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gpx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['gpx'][0]['userid'],
                                    "campaing"      => $operator_contacts['gpx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['gpx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['gpx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['gpx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['gpx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['gpx'][0]['userid'],
                                    'campaing' => $operator_contacts['gpx'][0]['remarks'],
                                    'senderidtype' => $operator_contacgpxts['gpx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['gpx'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['gpx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['gpx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['gpx'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'blink':
                        $gateway = collect($gateways)->where('sender_operator_name','Banglalink');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blink'][0]['userid'],
                                    "campaing"      => $operator_contacts['blink'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blink'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blink'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blink'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'sender'   =>str_replace('\"'," ",$associate_sender_id),// $clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blink'][0]['userid'],
                                    "campaing"      => $operator_contacts['blink'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blink'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blink'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blink'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['blink'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blink'][0]['userid'],
                                    "campaing"      => $operator_contacts['blink'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blink'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blink'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blink'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blink'][0]['userid'],
                                    "campaing"      => $operator_contacts['blink'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blink'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blink'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blink'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blink'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['blink'][0]['userid'],
                                    'campaing' => $operator_contacts['blink'][0]['remarks'],
                                    'senderidtype' => $operator_contacgpxts['blink'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blink'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['blink'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blink'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blink'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'blx':
                        
                        $gateway = collect($gateways)->where('sender_operator_name','BLx');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,    
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blx'][0]['userid'],
                                    "campaing"      => $operator_contacts['blx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blx'][0]['userid'],
                                    "campaing"      => $operator_contacts['blx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['blx'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j= 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blx'][0]['userid'],
                                    "campaing"      => $operator_contacts['blx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['blx'][0]['userid'],
                                    "campaing"      => $operator_contacts['blx'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['blx'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['blx'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['blx'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['blx'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi multi message
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['blx'][0]['userid'],
                                    'campaing' => $operator_contacts['blx'][0]['remarks'],
                                    'senderidtype' => $operator_contacgpxts['blx'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['blx'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['blx'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['blx'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['blx'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'robi':
                        
                        $gateway = collect($gateways)->where('sender_operator_name','Robi');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;

                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,    
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['robi'][0]['userid'],
                                    "campaing"      => $operator_contacts['robi'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['robi'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['robi'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['robi'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['robi'][0]['userid'],
                                    "campaing"      => $operator_contacts['robi'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['robi'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['robi'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['robi'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['robi'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['robi'][0]['userid'],
                                    "campaing"      => $operator_contacts['robi'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['robi'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['robi'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['robi'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['robi'][0]['userid'],
                                    "campaing"      => $operator_contacts['robi'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['robi'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['robi'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['robi'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['robi'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi multi message
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['robi'][0]['userid'],
                                    'campaing' => $operator_contacts['robi'][0]['remarks'],
                                    'senderidtype' => $operator_contacgpxts['robi'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['robi'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['robi'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['robi'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['robi'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'airtel':
                        
                        $gateway = collect($gateways)->where('sender_operator_name','Airtel');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['airtel'][0]['userid'],
                                    "campaing"      => $operator_contacts['airtel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['airtel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['airtel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['airtel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i  = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['airtel'][0]['userid'],
                                    "campaing"      => $operator_contacts['airtel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['airtel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['airtel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['airtel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['airtel'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['airtel'][0]['userid'],
                                    "campaing"      => $operator_contacts['airtel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['airtel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['airtel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['airtel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['airtel'][0]['userid'],
                                    "campaing"      => $operator_contacts['airtel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['airtel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['airtel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['airtel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['airtel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi multi message
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['airtel'][0]['userid'],
                                    'campaing' => $operator_contacts['airtel'][0]['remarks'],
                                    'senderidtype' => $operator_contacgpxts['airtel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['airtel'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['airtel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['airtel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['airtel'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    case 'rankstel':
                        
                        $gateway = collect($gateways)->where('sender_operator_name','RanksTell');

                        foreach($gateway as $gate)
                        {
                            $associate_sender_id = $gate->associate_sender_id;
                            $associate_gateway = Gateway::where('id',$gate->associate_gateway)->first();
                        }
                        

                        if ($associate_gateway->id == 1)
                        {   //teletalk
                            $data = [];
                            foreach($operator_contacts[$operator] as $opcontact)
                            {
                                $data = [ 
                                    "userid"        => $opcontact['userid'],
                                    "campaing"  => $opcontact['remarks'],
                                    "senderidtype" => $opcontact['sms_catagory'],
                                    "user"		=> $associate_gateway->user,                //$optUrlUser[$optID],               
                                    "pass"		=> $associate_gateway->password,                //$optUrlPass[$optID],  
                                    "op"		=> "SMS", 
                                    "mobile"	    => $opcontact['contact'],
                                    "messagecount" => $opcontact['number_of_sms'],  
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$request->senderid,     
                                    "charset"	=> $opcontact['sms_type'], 
                                    "sms"		=> $opcontact['sms_content'],
                                    'owner_id' => $opcontact['owner_id'],
                                    'owner_type' => $opcontact['owner_type'],
                                    'post_url' =>  $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToTelitalk($data);
                            }
                        } else if($associate_gateway->id == 2) {
                            //gp
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['rankstel'][0]['userid'],
                                    "campaing"      => $operator_contacts['rankstel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['rankstel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 3) {
                            //blink
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 4) {
                            //robi
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i  = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 5) {
                            //airtel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 6) {
                            //blx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBlink($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBlink($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBlink($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 7) {
                            //gpx
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['rankstel'][0]['userid'],
                                    "campaing"      => $operator_contacts['rankstel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['rankstel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 8) {
                            //rankstel
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    "messagetype"	=> $operator_contacts['rankstel'][0]['sms_type'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToRanksTel($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            "messagetype"	=> $opcontact['sms_type'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToRanksTel($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        "messagetype"	=> $opcontact['sms_type'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToRanksTel($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 9) {
                            //gp-3
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['rankstel'][0]['userid'],
                                    "campaing"      => $operator_contacts['rankstel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['rankstel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 10) {
                            //gp-2
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {

                                    $gp100[] = $opcontact['contact'];
                                    
                                }

                                $data = [ 
                                    "userid"        => $operator_contacts['rankstel'][0]['userid'],
                                    "campaing"      => $operator_contacts['rankstel'][0]['remarks'],
                                    "senderidtype" => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    "username"		=> $associate_gateway->user,               
                                    "password"		=> $associate_gateway->password,  
                                    "apicode"		=> "1", 
                                    "msisdn"	    => implode(",",$gp100),
                                    "messagecount" => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    "countrycode"	=> "880",
                                    "messageid"		=> 0,
                                    "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                    "messagetype"	=> $operator_contacts['rankstel'][0]['sms_type'], 
                                    "message"		=> $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    'post_url'      => $associate_gateway->api_url,
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                    
                                ];
                                $this->smssend->smsSendToGp($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [ 
                                            "userid"        => $opcontact['userid'],
                                            "campaing"      => $opcontact['remarks'],
                                            "senderidtype" => $opcontact['sms_catagory'],
                                            "username"		=> $associate_gateway->user,               
                                            "password"		=> $associate_gateway->password,  
                                            "apicode"		=> "1", 
                                            "msisdn"	    => implode(",",$gp100),
                                            "messagecount" => $opcontact['number_of_sms'],
                                            "countrycode"	=> "880",
                                            "messageid"		=> 0,
                                            "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                            "messagetype"	=> $opcontact['sms_type'], 
                                            "message"		=> $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            'post_url'      => $associate_gateway->api_url,
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                            
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToGp($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [ 
                                        "userid"        => $opcontact['userid'],
                                        "campaing"      => $opcontact['remarks'],
                                        "senderidtype" => $opcontact['sms_catagory'],
                                        "username"		=> $associate_gateway->user,               
                                        "password"		=> $associate_gateway->password,  
                                        "apicode"		=> "1", 
                                        "msisdn"	    => implode(",",$gp100),
                                        "messagecount" => $opcontact['number_of_sms'],
                                        "countrycode"	=> "880",
                                        "messageid"		=> 0,
                                        "cli"	  	    => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,     
                                        "messagetype"	=> $opcontact['sms_type'], 
                                        "message"		=> $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        'post_url'      => $associate_gateway->api_url,
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        
                                    ];
                                    $this->smssend->smsSendToGp($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 15) {
                            //EasyWeb
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    //'user_sent_sms_id' => $operator_contacts['rankstel'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToEasyWeb($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToEasyWeb($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToEasyWeb($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 16) {
                            //Banlaphone
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 100)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }

                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'username' => $associate_gateway->user,
                                    'password' => $associate_gateway->password,
                                    'msisdn'   => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                $this->smssend->smsSendToBanglaPhone($data);
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 100)
                                    {
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'username' => $associate_gateway->user,
                                            'password' => $associate_gateway->password,
                                            'msisdn'   => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];

                                        $i = 0;
                                        $this->smssend->smsSendToBanglaPhone($data);
                                        unset($gp100);
                                    }
                                    if ($i < 100 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }

                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'username' => $associate_gateway->user,
                                        'password' => $associate_gateway->password,
                                        'msisdn'   => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'sender'   => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    $this->smssend->smsSendToBanglaPhone($data);
                                    
                                }
                            }
                            //return $data;
                        } else if($associate_gateway->id == 18) {
                            //robi multi message
                            $gp100 = [];
                            $i = 0;
                            $j = 0;
                            $data = [];
                            if (count($operator_contacts[$operator]) < 200)
                            {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    $gp100[] = $opcontact['contact'];
                                }
                                $data = [
                                    'userid'   => $operator_contacts['rankstel'][0]['userid'],
                                    'campaing' => $operator_contacts['rankstel'][0]['remarks'],
                                    'senderidtype' => $operator_contacgpxts['rankstel'][0]['sms_catagory'],
                                    'post_url' => $associate_gateway->api_url,
                                    'To'       => implode(",",$gp100),
                                    'messagecount' => $operator_contacts['rankstel'][0]['number_of_sms'],
                                    'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                    'Message'  => $operator_contacts['rankstel'][0]['sms_content'],
                                    'owner_id' => $operator_contacts['rankstel'][0]['owner_id'],
                                    'owner_type' => $operator_contacts['rankstel'][0]['owner_type'],
                                    
                                    //'user_sent_sms_id' => $operator_contacts['teletalk'][0]['user_sent_sms_id']
                                ];
                                if ($senderidtype == 'nomask')
                                {
                                    $this->smssend->smsSendToRobiNonMask($data);
                                } else {
                                    $this->smssend->smsSendToRobi($data);
                                }
                            } else {
                                foreach($operator_contacts[$operator] as $opcontact)
                                {
                                    
                                    if (count($gp100) == 200)
                                    {
                                        
                                        $data = [
                                            'userid'   => $opcontact['userid'],
                                            'campaing' => $opcontact['remarks'],
                                            'senderidtype' => $opcontact['sms_catagory'],
                                            'post_url' => $associate_gateway->api_url,
                                            'To'       => implode(",",$gp100),
                                            'messagecount' => $opcontact['number_of_sms'],
                                            'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                            'Message'  => $opcontact['sms_content'],
                                            'owner_id' => $opcontact['owner_id'],
                                            'owner_type' => $opcontact['owner_type'],
                                            
                                            //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                        ];
                                        if ($senderidtype == 'nomask')
                                        {
                                            $this->smssend->smsSendToRobiNonMask($data);
                                        } else {
                                            $this->smssend->smsSendToRobi($data);
                                        }
                                        $i = 0;
                                        unset($gp100);
                                    }
                                    //if ($i <= 200)
                                    if ($i < 200 && $j < count($operator_contacts[$operator]))
                                    {

                                        $gp100[] = $opcontact['contact'];
                                        $i++;
                                        $j++;
                                        continue;
                                    }
                                    $data = [
                                        'userid'   => $opcontact['userid'],
                                        'campaing' => $opcontact['remarks'],
                                        'senderidtype' => $opcontact['sms_catagory'],
                                        'post_url' => $associate_gateway->api_url,
                                        'To'       => implode(",",$gp100),
                                        'messagecount' => $opcontact['number_of_sms'],
                                        'From'     => str_replace('\"'," ",$associate_sender_id),//$clientsenderids->sender_name,
                                        'Message'  => $opcontact['sms_content'],
                                        'owner_id' => $opcontact['owner_id'],
                                        'owner_type' => $opcontact['owner_type'],
                                        
                                        //'user_sent_sms_id' => $opcontact['user_sent_sms_id']
                                    ];
                                    if ($senderidtype == 'nomask')
                                    {
                                        $this->smssend->smsSendToRobiNonMask($data);
                                    } else {
                                        $this->smssend->smsSendToRobi($data);
                                    }
                                }
                            }
                            //return $data;
                        }
                    break;
                    default:
                    break;
                }
            }

            
        }
        
        
        $clientmasksmsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'mask');
        $clientnonmasksmsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'nomask');
        $clientvoicemsbal_1 = $this->product->getSmsBalanceByCategory($clientid->id,'voice');

        $totalmaskbal_1 = ($clientmasksmsbal_1-$this->consumesms->totalConsumeMaskBalance($clientid->id));
        $totalnonmaskbal_1 = ($clientnonmasksmsbal_1-$this->consumesms->totalConsumeNonMaskBalance($clientid->id));
        $totalvoicebal_1 = ($clientvoicemsbal_1-$this->consumesms->totalConsumeVoiceBalance($clientid->id));

        
        if ($passwordresetfor == "user" && empty($requestfor))
        {
            return redirect(route('verify-phone'));

        } else if ($passwordresetfor == "user" && $requestfor == "passwordreset") {

            session()->put('passwordresetfor','user');
            session()->put('userphone',$verifingClient->phone);
            return redirect(route('reset-password'));

        } else if ($passwordresetfor == "reseller" && $requestfor == "passwordreset") {

            session()->put('passwordresetfor','reseller');
            session()->put('userphone',$verifingClient->phone);
            return redirect(route('reset-password'));

        } else if ($passwordresetfor == "root" && $requestfor == "passwordreset") {

            session()->put('passwordresetfor','root');
            session()->put('userphone',$verifingClient->phone);
            return redirect(route('reset-password'));

        } else {

            return redirect(route('verify-phone'));

        }

        if ($totalmaskbal_1 <= $totalmaskbal || $totalnonmaskbal_1 <= $totalnonmaskbal || $totalvoicebal_1<= $totalvoicebal)
        {
            if ($senderidtype == 'mask')
            {
                if (session()->has('sendsuccess'))
                {
                    //return response()->json(['msg' => session()->get('sendsuccess'),'mask' => $totalmaskbal_1],200);
                    return redirect()->with('msg',session()->get('sendsuccess'));
                }

                if (session()->has('senderr'))
                {
                    //return response()->json(['errmsg' => session()->get('senderr')],406);
                    return redirect()->with('errmsg', session()->get('senderr'));
                }
                //return response()->json(['msg' => 'SMS succesfully sent','mask' => $totalmaskbal_1],200);
            } else if ($senderidtype == 'nomask') {
                if (session()->has('sendsuccess'))
                {
                    //return response()->json(['msg' => session()->get('sendsuccess'),'mask' => $totalmaskbal_1],200);
                    return redirect()->with('msg', session()->get('sendsuccess'));
                }

                if (session()->has('senderr'))
                {
                    //return response()->json(['errmsg' => session()->get('senderr')],406);
                    return redirect()->with('errmsg', session()->get('senderr'));
                }
                //return response()->json(['msg' => 'SMS succesfully sent','nomask' => $totalnonmaskbal_1],200);
            } else if ($senderidtype == 'voice') {
                if (session()->has('sendsuccess'))
                {
                    //return response()->json(['msg' => session()->get('sendsuccess'),'mask' => $totalmaskbal_1],200);
                    return redirect()->with('msg', session()->get('sendsuccess'));
                }

                if (session()->has('senderr'))
                {
                    //return response()->json(['errmsg' => session()->get('senderr')],406);
                    return redirect()->with('errmsg', session()->get('senderr'));
                }
                //return response()->json(['msg' => 'SMS succesfully sent','voice' => $totalvoicebal_1],200);
            } else {
                return 0;
            }
        } else {
            if (session()->has('sendsuccess'))
            {
                //return response()->json(['msg' => session()->get('sendsuccess'),'mask' => $totalmaskbal_1],200);
                return redirect()->with('msg', session()->get('sendsuccess'));
            }

            if (session()->has('senderr'))
            {
                //return response()->json(['errmsg' => session()->get('senderr')],406);
                return redirect()->with('errmsg', session()->get('senderr'));
            }
            //return response()->json(['errmsg' => 'There is an error, with the senderid, please contact with vendor'],406);
        }
    }



}